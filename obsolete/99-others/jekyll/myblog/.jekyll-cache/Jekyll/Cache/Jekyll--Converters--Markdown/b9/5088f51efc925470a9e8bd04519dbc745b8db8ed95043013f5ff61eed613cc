I"+Å<h2 id="rubyå®‰è£…">rubyå®‰è£…</h2>

<p><strong>å®‰è£…rbenv</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer | bash
<span class="nb">echo</span> <span class="s1">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">echo eval</span> <span class="se">\"\$\(</span>rbenv init -<span class="se">\)\"</span> <span class="o">&gt;&gt;</span>  ~/.bashrc
<span class="nb">source</span> ~/.bashrc

rbenv <span class="nt">-v</span>
</code></pre></div></div>

<p><strong>å®‰è£…ruby</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum remove <span class="nt">-y</span> ruby
<span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> readline-devel
<span class="nv">ruby_file</span><span class="o">=</span>~/.rbenv/cache/ruby-2.6.5.tar.bz2
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$ruby_file</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>wget <span class="s1">'https://cache.ruby-china.com/pub/ruby/2.6/ruby-2.6.5.tar.bz2'</span> <span class="nt">-P</span> ~/.rbenv/cache
<span class="k">fi
</span>rbenv <span class="nb">install </span>2.6.5
rbenv global 2.6.5
rbenv versions

ruby <span class="nt">-v</span>

</code></pre></div></div>

<p><strong>æ£€æŸ¥å®‰è£…</strong></p>

<pre><code class="language-SHELL">curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash
ruby -v
</code></pre>

<p>å¦‚æœè¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼Œè¡¨ç¤º</p>

<p><img src="image/1571194274287.png" alt="1571194274287" /></p>

<h2 id="è¿›å…¥interactive-ruby">è¿›å…¥Interactive Ruby</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span>
</code></pre></div></div>

<h2 id="å…¥é—¨">å…¥é—¨</h2>

<h3 id="hello-world">hello world*</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"Hello World"</span>
<span class="nb">puts</span> <span class="s2">"Hello World"</span>
<span class="mi">3</span><span class="o">+</span><span class="mi">2</span>
<span class="no">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="å‡½æ•°">å‡½æ•°</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">h</span>
<span class="nb">puts</span> <span class="s2">"Hello World!"</span>
<span class="k">end</span>

<span class="n">h</span>
<span class="n">h</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span>
<span class="k">end</span>

<span class="n">h</span><span class="p">(</span><span class="s2">"Matz"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="nb">name</span> <span class="o">=</span> <span class="s2">"world"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="p">.</span><span class="nf">capitalize</span><span class="si">}</span><span class="s2">!"</span>
<span class="k">end</span>

<span class="n">h</span> <span class="s2">"chris"</span>
<span class="n">h</span>
</code></pre></div></div>

<h3 id="ç±»">ç±»</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Greeter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span> <span class="o">=</span> <span class="s2">"World"</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">say_hi</span>
    <span class="nb">puts</span> <span class="s2">"Hi </span><span class="si">#{</span><span class="vi">@name</span><span class="si">}</span><span class="s2">!"</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">say_bye</span>
    <span class="nb">puts</span> <span class="s2">"Bye </span><span class="si">#{</span><span class="vi">@name</span><span class="si">}</span><span class="s2">, come back soon."</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">g</span> <span class="o">=</span> <span class="no">Greeter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Pat"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">say_hi</span>
<span class="n">g</span><span class="p">.</span><span class="nf">say_bye</span>
<span class="n">g</span><span class="o">.</span><span class="vi">@name</span>      <span class="c1"># æ— æ³•è®¿é—®</span>

<span class="c1"># æ˜¾ç¤ºå®ä¾‹å‡½æ•°</span>
<span class="no">Greeter</span><span class="p">.</span><span class="nf">instance_methods</span>
<span class="no">Greeter</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">(</span><span class="kp">false</span><span class="p">)</span>

<span class="n">g</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"say_hi"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"to_s"</span><span class="p">)</span>
</code></pre></div></div>

<p>è·å–å®ä¾‹å˜é‡åã€‚åœ¨ Ruby é‡Œï¼Œæ‚¨å¯ä»¥æŠŠä¸€ä¸ªç±»æ‰“å¼€ç„¶åæ”¹å˜å®ƒã€‚è¿™äº›æ”¹å˜ä¼šå¯¹ä»¥åç”Ÿæˆçš„ç”šè‡³æ˜¯å·²ç»ç”Ÿæˆçš„å¯¹è±¡äº§ç”Ÿå³æ—¶æ•ˆæœã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Greeter
  attr_accessor :name
end

g = Greeter.new("Andy")
g.respond_to?("name")
g.respond_to?("name=")
g.say_hi
g.name="Betty"

g
Greeter.instance_methods(false)
</code></pre></div></div>

<p>æ›´åŠ å®Œæ•´çš„ä¾‹å­ï¼š</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="n">ri20min</span><span class="p">.</span><span class="nf">rb</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="k">class</span> <span class="nc">MegaGreeter</span>
  <span class="nb">attr_accessor</span> <span class="ss">:names</span>

  <span class="c1"># Create the object</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">names</span> <span class="o">=</span> <span class="s2">"World"</span><span class="p">)</span>
    <span class="vi">@names</span> <span class="o">=</span> <span class="n">names</span>
  <span class="k">end</span>

  <span class="c1"># Say hi to everybody</span>
  <span class="k">def</span> <span class="nf">say_hi</span>
    <span class="k">if</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="nb">puts</span> <span class="s2">"..."</span>
    <span class="k">elsif</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"each"</span><span class="p">)</span>
      <span class="c1"># @names is a list of some kind, iterate!</span>
      <span class="vi">@names</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
        <span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span>
      <span class="k">end</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="vi">@names</span><span class="si">}</span><span class="s2">!"</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># Say bye to everybody</span>
  <span class="k">def</span> <span class="nf">say_bye</span>
    <span class="k">if</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="nb">puts</span> <span class="s2">"..."</span>
    <span class="k">elsif</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"join"</span><span class="p">)</span>
      <span class="c1"># Join the list elements with commas</span>
      <span class="nb">puts</span> <span class="s2">"Goodbye </span><span class="si">#{</span><span class="vi">@names</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span><span class="si">}</span><span class="s2">.  Come back soon!"</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"Goodbye </span><span class="si">#{</span><span class="vi">@names</span><span class="si">}</span><span class="s2">.  Come back soon!"</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>


<span class="k">if</span> <span class="kp">__FILE__</span> <span class="o">==</span> <span class="p">\</span><span class="vg">$0</span>
  <span class="n">mg</span> <span class="o">=</span> <span class="no">MegaGreeter</span><span class="p">.</span><span class="nf">new</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>

  <span class="c1"># Change name to be "Zeke"</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">names</span> <span class="o">=</span> <span class="s2">"Zeke"</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>

  <span class="c1"># Change the name to an array of names</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Albert"</span><span class="p">,</span> <span class="s2">"Brenda"</span><span class="p">,</span> <span class="s2">"Charles"</span><span class="p">,</span>
    <span class="s2">"Dave"</span><span class="p">,</span> <span class="s2">"Engelbert"</span><span class="p">]</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>

  <span class="c1"># Change to nil</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">names</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>
<span class="k">end</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="n">ri20min</span><span class="p">.</span><span class="nf">rb</span>
<span class="p">.</span><span class="nf">/</span><span class="n">ri20min</span><span class="p">.</span><span class="nf">rb</span>
</code></pre></div></div>

<h3 id="irbæ”¯æŒä¸­æ–‡">irbæ”¯æŒä¸­æ–‡</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export LANG=en_US.UTF-8
irb
puts "ä½ å¥½ï¼Œä¸–ç•Œï¼";
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ruby -e 'puts Encoding.find("locale")'
</code></pre></div></div>

<h3 id="here-document">Here Document</h3>

<p>â€œHere Documentâ€ æ˜¯æŒ‡å»ºç«‹å¤šè¡Œå­—ç¬¦ä¸²ã€‚åœ¨ Â«Â ä¹‹åï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ ‡è¯†ç¬¦æ¥ç»ˆæ­¢å­—ç¬¦ä¸²ï¼Œä¸”å½“å‰è¡Œä¹‹åç›´åˆ°ç»ˆæ­¢ç¬¦ä¸ºæ­¢çš„æ‰€æœ‰è¡Œæ˜¯å­—ç¬¦ä¸²çš„å€¼ã€‚</p>

<p>å¦‚æœç»ˆæ­¢ç¬¦ç”¨å¼•å·æ‹¬èµ·ï¼Œå¼•å·çš„ç±»å‹å†³å®šäº†é¢å‘è¡Œçš„å­—ç¬¦ä¸²ç±»å‹ã€‚è¯·æ³¨æ„Â«Â å’Œç»ˆæ­¢ç¬¦ä¹‹é—´å¿…é¡»æ²¡æœ‰ç©ºæ ¼ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &lt;&lt; SEOF &gt; here_document.rb
#!/usr/bin/env ruby
# -*- coding : utf-8 -*-
 
print &lt;&lt;EOF
    è¿™æ˜¯ç¬¬ä¸€ç§æ–¹å¼åˆ›å»ºhere document ã€‚
    å¤šè¡Œå­—ç¬¦ä¸²ã€‚
EOF
 
print &lt;&lt;"EOF";                # ä¸ä¸Šé¢ç›¸åŒ
    è¿™æ˜¯ç¬¬äºŒç§æ–¹å¼åˆ›å»ºhere document ã€‚
    å¤šè¡Œå­—ç¬¦ä¸²ã€‚
EOF
 
print &lt;&lt;\`EOC\`                 # æ‰§è¡Œå‘½ä»¤
    echo hi there
    echo lo there
EOC
 
print &lt;&lt;"foo", &lt;&lt;"bar"          # æ‚¨å¯ä»¥æŠŠå®ƒä»¬è¿›è¡Œå †å 
    I said foo.
foo
    I said bar.
bar

SEOF

chmod 755 here_document.rb
./here_document.rb
</code></pre></div></div>

<h3 id="begin-end">Begin End</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">begin_end</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">puts</span> <span class="s2">"è¿™æ˜¯ä¸» Ruby ç¨‹åº"</span>
 
<span class="k">END</span> <span class="p">{</span>
   <span class="nb">puts</span> <span class="s2">"åœæ­¢ Ruby ç¨‹åº"</span>
<span class="p">}</span>
<span class="k">BEGIN</span> <span class="p">{</span>
   <span class="nb">puts</span> <span class="s2">"åˆå§‹åŒ– Ruby ç¨‹åº"</span>
<span class="p">}</span>
<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<h3 id="é›†åˆ">é›†åˆ</h3>

<ul>
  <li>array</li>
  <li>hash</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=collection.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------'
ary = [ "fred", 10, 3.14, "This is a string", "last element", ]
ary.each do |i|
    puts i
end

puts '----------------------------------'
hsh = colors = { "red" =&gt; 0xf00, "green" =&gt; 0x0f0, "blue" =&gt; 0x00f }
hsh.each do |key, value|
    print key, " is ", value, "\n"
end

puts '----------------------------------'
(10..15).each do |n|
    print n, ' '
end
print "\n" 

puts '----------------------------------'
nums = Array.new(10) { |e| e = e * 2 }
puts "#{nums}"


puts '----------------------------------'
months = Hash.new( "month" )
 
puts "#{months[0]}"
puts "#{months[72]}"
puts months


EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="åŒå¼•å·å’Œå•å¼•å·åŒºåˆ«">åŒå¼•å·å’Œå•å¼•å·åŒºåˆ«</h3>

<p>åŒå¼•å·é‡Œé¢å¯ä»¥ interpolation ä»¥åŠ escape ã€‚å•å¼•å·ä¸å¯ä»¥ã€‚å•å¼•å·å­—ç¬¦ä¸²å­—é¢é‡é‡Œåªå¯ä»¥ç”¨åæ–œçº¿æ¥è½¬ä¹‰å•å¼•å·å’Œåæ–œçº¿ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a = 1
"#{a}"
'#{a}'
puts "a\nb"
puts 'a\nb'
</code></pre></div></div>

<h3 id="å˜é‡">å˜é‡</h3>

<p>Ruby æ”¯æŒäº”ç§ç±»å‹çš„å˜é‡ã€‚</p>

<ul>
  <li>ä¸€èˆ¬å°å†™å­—æ¯ã€ä¸‹åˆ’çº¿å¼€å¤´ï¼šå˜é‡ï¼ˆVariableï¼‰ã€‚</li>
  <li><code class="highlighter-rouge">$</code>å¼€å¤´ï¼šå…¨å±€å˜é‡ï¼ˆGlobal variableï¼‰ã€‚</li>
  <li><code class="highlighter-rouge">@</code>å¼€å¤´ï¼šå®ä¾‹å˜é‡ï¼ˆInstance variableï¼‰ã€‚</li>
  <li><code class="highlighter-rouge">@@</code>å¼€å¤´ï¼šç±»å˜é‡ï¼ˆClass variableï¼‰ç±»å˜é‡è¢«å…±äº«åœ¨æ•´ä¸ªç»§æ‰¿é“¾ä¸­</li>
  <li>å¤§å†™å­—æ¯å¼€å¤´ï¼šå¸¸æ•°ï¼ˆConstantï¼‰ã€‚</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">variable</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="p">\</span><span class="vg">$global_variable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">class</span> <span class="nc">Class1</span>
  <span class="k">def</span> <span class="nf">print_global</span>
      <span class="nb">puts</span> <span class="s2">"å…¨å±€å˜é‡åœ¨ Class1 ä¸­è¾“å‡ºä¸º #</span><span class="se">\$</span><span class="s2">global_variable"</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="k">class</span> <span class="nc">Class2</span>
  <span class="k">def</span> <span class="nf">print_global</span>
      <span class="nb">puts</span> <span class="s2">"å…¨å±€å˜é‡åœ¨ Class2 ä¸­è¾“å‡ºä¸º #</span><span class="se">\$</span><span class="s2">global_variable"</span>
  <span class="k">end</span>
<span class="k">end</span>
 
<span class="n">class1obj</span> <span class="o">=</span> <span class="no">Class1</span><span class="p">.</span><span class="nf">new</span>
<span class="n">class1obj</span><span class="p">.</span><span class="nf">print_global</span>
<span class="n">class2obj</span> <span class="o">=</span> <span class="no">Class2</span><span class="p">.</span><span class="nf">new</span>
<span class="n">class2obj</span><span class="p">.</span><span class="nf">print_global</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">class</span> <span class="nc">Customer</span>
   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
      <span class="vi">@cust_id</span><span class="o">=</span><span class="nb">id</span>
      <span class="vi">@cust_name</span><span class="o">=</span><span class="nb">name</span>
      <span class="vi">@cust_addr</span><span class="o">=</span><span class="n">addr</span>
   <span class="k">end</span>
   <span class="k">def</span> <span class="nf">display_details</span><span class="p">()</span>
      <span class="nb">puts</span> <span class="s2">"Customer id </span><span class="si">#@cust_id</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer name </span><span class="si">#@cust_name</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer address </span><span class="si">#@cust_addr</span><span class="s2">"</span>
    <span class="k">end</span>
<span class="k">end</span>
 
<span class="c1"># åˆ›å»ºå¯¹è±¡</span>
<span class="n">cust1</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span> <span class="s2">"John"</span><span class="p">,</span> <span class="s2">"Wisdom Apartments, Ludhiya"</span><span class="p">)</span>
<span class="n">cust2</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"2"</span><span class="p">,</span> <span class="s2">"Poul"</span><span class="p">,</span> <span class="s2">"New Empire road, Khandala"</span><span class="p">)</span>
 
<span class="c1"># è°ƒç”¨æ–¹æ³•</span>
<span class="n">cust1</span><span class="p">.</span><span class="nf">display_details</span><span class="p">()</span>
<span class="n">cust2</span><span class="p">.</span><span class="nf">display_details</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">class</span> <span class="nc">Customer</span>
   <span class="vc">@@no_of_customers</span><span class="o">=</span><span class="mi">0</span>
   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
      <span class="vi">@cust_id</span><span class="o">=</span><span class="nb">id</span>
      <span class="vi">@cust_name</span><span class="o">=</span><span class="nb">name</span>
      <span class="vi">@cust_addr</span><span class="o">=</span><span class="n">addr</span>
   <span class="k">end</span>
   <span class="k">def</span> <span class="nf">display_details</span><span class="p">()</span>
      <span class="nb">puts</span> <span class="s2">"Customer id </span><span class="si">#@cust_id</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer name </span><span class="si">#@cust_name</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer address </span><span class="si">#@cust_addr</span><span class="s2">"</span>
    <span class="k">end</span>
    <span class="k">def</span> <span class="nf">total_no_of_customers</span><span class="p">()</span>
       <span class="vc">@@no_of_customers</span> <span class="o">+=</span> <span class="mi">1</span>
       <span class="nb">puts</span> <span class="s2">"Total number of customers: </span><span class="si">#@@no_of_customers</span><span class="s2">"</span>
    <span class="k">end</span>
<span class="k">end</span>
 
<span class="c1"># åˆ›å»ºå¯¹è±¡</span>
<span class="n">cust1</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span> <span class="s2">"John"</span><span class="p">,</span> <span class="s2">"Wisdom Apartments, Ludhiya"</span><span class="p">)</span>
<span class="n">cust2</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"2"</span><span class="p">,</span> <span class="s2">"Poul"</span><span class="p">,</span> <span class="s2">"New Empire road, Khandala"</span><span class="p">)</span>
 
<span class="c1"># è°ƒç”¨æ–¹æ³•</span>
<span class="n">cust1</span><span class="p">.</span><span class="nf">total_no_of_customers</span><span class="p">()</span>
<span class="n">cust2</span><span class="p">.</span><span class="nf">total_no_of_customers</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">class</span> <span class="nc">Example</span>
   <span class="no">VAR1</span> <span class="o">=</span> <span class="mi">100</span>
   <span class="no">VAR2</span> <span class="o">=</span> <span class="mi">200</span>
   <span class="k">def</span> <span class="nf">show</span>
       <span class="nb">puts</span> <span class="s2">"ç¬¬ä¸€ä¸ªå¸¸é‡çš„å€¼ä¸º </span><span class="si">#{</span><span class="no">VAR1</span><span class="si">}</span><span class="s2">"</span>
       <span class="nb">puts</span> <span class="s2">"ç¬¬äºŒä¸ªå¸¸é‡çš„å€¼ä¸º </span><span class="si">#{</span><span class="no">VAR2</span><span class="si">}</span><span class="s2">"</span>
   <span class="k">end</span>
<span class="k">end</span>
 
<span class="c1"># åˆ›å»ºå¯¹è±¡</span>
<span class="n">object</span><span class="o">=</span><span class="no">Example</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">object</span><span class="p">.</span><span class="nf">show</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<p><strong>Ruby ä¼ªå˜é‡</strong></p>

<p>å®ƒä»¬æ˜¯ç‰¹æ®Šçš„å˜é‡ï¼Œæœ‰ç€å±€éƒ¨å˜é‡çš„å¤–è§‚ï¼Œä½†è¡Œä¸ºå´åƒå¸¸é‡ã€‚æ‚¨ä¸èƒ½ç»™è¿™äº›å˜é‡èµ‹ä»»ä½•å€¼ã€‚</p>

<ul>
  <li><strong>self:</strong> å½“å‰æ–¹æ³•çš„æ¥æ”¶å™¨å¯¹è±¡ã€‚</li>
  <li><strong>true:</strong> ä»£è¡¨ true çš„å€¼ã€‚</li>
  <li><strong>false:</strong> ä»£è¡¨ false çš„å€¼ã€‚</li>
  <li><strong>nil:</strong> ä»£è¡¨ undefined çš„å€¼ã€‚</li>
  <li><strong>__FILE__:</strong> å½“å‰æºæ–‡ä»¶çš„åç§°ã€‚</li>
  <li><strong>__LINE__:</strong> å½“å‰è¡Œåœ¨æºæ–‡ä»¶ä¸­çš„ç¼–å·ã€‚</li>
</ul>

<h3 id="åŒå†’å·è¿ç®—ç¬¦-">åŒå†’å·è¿ç®—ç¬¦ â€œ::â€</h3>

<p>ä¸¤ä¸ªå†’å· <strong>::</strong> æ¥å¼•ç”¨ç±»æˆ–æ¨¡å—ä¸­çš„å¸¸é‡</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MR_COUNT = 0        # å®šä¹‰åœ¨ä¸» Object ç±»ä¸Šçš„å¸¸é‡
module Foo
  MR_COUNT = 0
  ::MR_COUNT = 1    # è®¾ç½®å…¨å±€è®¡æ•°ä¸º 1
  MR_COUNT = 2      # è®¾ç½®å±€éƒ¨è®¡æ•°ä¸º 2
end
puts MR_COUNT       # è¿™æ˜¯å…¨å±€å¸¸é‡
puts Foo::MR_COUNT  # è¿™æ˜¯ "Foo" çš„å±€éƒ¨å¸¸é‡

CONST = ' out there'
class Inside_one
   CONST = proc {' in there'}
   def where_is_my_CONST
      ::CONST + ' inside one'
   end
end
class Inside_two
   CONST = ' inside two'
   def where_is_my_CONST
      CONST
   end
end
puts Inside_one.new.where_is_my_CONST
puts Inside_two.new.where_is_my_CONST
puts Object::CONST + Inside_two::CONST
puts Inside_two::CONST + CONST
puts Inside_one::CONST
puts Inside_one::CONST.call + Inside_two::CONST
</code></pre></div></div>

<h3 id="å¤šè¡Œæ³¨é‡Š">å¤šè¡Œæ³¨é‡Š</h3>

<p>ä½¿ç”¨ <strong>=begin</strong> å’Œ <strong>=end</strong> è¯­æ³•æ³¨é‡Šå¤šè¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=comment.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts "Hello, Ruby!"
 
=begin
è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šã€‚
å¯æ‰©å±•è‡³ä»»æ„æ•°é‡çš„è¡Œã€‚
ä½† =begin å’Œ =end åªèƒ½å‡ºç°åœ¨ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œã€‚ 
=end

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="å¾ªç¯">å¾ªç¯</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=loop.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------------------'
i = 0
num = 5
 
while i &lt; num  do
   puts("åœ¨å¾ªç¯è¯­å¥ä¸­ i = #{i}" )
   i +=1
end

puts '----------------------------------------------'
\$i = 0
\$num = 5
begin
   puts("åœ¨å¾ªç¯è¯­å¥ä¸­ i = #\$i" )
   \$i +=1
end while \$i &lt; \$num

puts '----------------------------------------------'
\$i = 0
\$num = 5
 
until \$i &gt; \$num  do
   puts("åœ¨å¾ªç¯è¯­å¥ä¸­ i = #\$i" )
   \$i +=1;
end

puts '----------------------------------------------'
\$i = 0
\$num = 5
begin
   puts("åœ¨å¾ªç¯è¯­å¥ä¸­ i = #\$i" )
   \$i +=1;
end until \$i &gt; \$num

puts '----------------------------------------------'
for i in 0..5
   puts "å±€éƒ¨å˜é‡çš„å€¼ä¸º #{i}"
end

puts '----------------------------------------------'
(0..5).each do |i|
   puts "å±€éƒ¨å˜é‡çš„å€¼ä¸º #{i}"
end

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="å—block">å—ï¼ˆblockï¼‰</h3>

<ul>
  <li>å—ç”±å¤§é‡çš„ä»£ç ç»„æˆã€‚</li>
  <li>æ‚¨éœ€è¦ç»™å—å–ä¸ªåç§°ã€‚</li>
  <li>å—ä¸­çš„ä»£ç æ€»æ˜¯åŒ…å«åœ¨å¤§æ‹¬å· {} å†…ã€‚</li>
  <li>å—æ€»æ˜¯ä»ä¸å…¶å…·æœ‰ç›¸åŒåç§°çš„å‡½æ•°è°ƒç”¨ã€‚è¿™æ„å‘³ç€å¦‚æœæ‚¨çš„å—åç§°ä¸º <em>test</em>ï¼Œé‚£ä¹ˆæ‚¨è¦ä½¿ç”¨å‡½æ•° <em>test</em> æ¥è°ƒç”¨è¿™ä¸ªå—ã€‚</li>
  <li>æ‚¨å¯ä»¥ä½¿ç”¨ <em>yield</em> è¯­å¥æ¥è°ƒç”¨å—ã€‚</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=block.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

def test
   puts "åœ¨ test æ–¹æ³•å†…"
   yield
   puts "ä½ åˆå›åˆ°äº† test æ–¹æ³•å†…"
   yield
end
test {puts "ä½ åœ¨å—å†…"}

puts '----------------------------------------------'
def test
   yield 5, 'five'
   puts "åœ¨ test æ–¹æ³•å†…"
   yield 100, 'one hundred'
end
test {|a, b| puts "ä½ åœ¨å— #{a} å†… #{b}"}

puts '----------------------------------------------'
def test
  yield
end
test{ puts "Hello world"}

puts '----------------------------------------------'
def test(&amp;block)
   block.call
end
test { puts "Hello World!"}

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="æ¨¡å—module">æ¨¡å—ï¼ˆModuleï¼‰</h3>

<p>æ¨¡å—ï¼ˆModuleï¼‰æ˜¯ä¸€ç§æŠŠæ–¹æ³•ã€ç±»å’Œå¸¸é‡ç»„åˆåœ¨ä¸€èµ·çš„æ–¹å¼ã€‚æ¨¡å—ï¼ˆModuleï¼‰ä¸ºæ‚¨æä¾›äº†ä¸¤å¤§å¥½å¤„ã€‚</p>

<ul>
  <li>æ¨¡å—æä¾›äº†ä¸€ä¸ª<em>å‘½åç©ºé—´</em>å’Œé¿å…åå­—å†²çªã€‚</li>
  <li>æ¨¡å—å®ç°äº† <em>mixin</em> è£…ç½®ã€‚</li>
</ul>

<p>æ¨¡å—ï¼ˆModuleï¼‰å®šä¹‰äº†ä¸€ä¸ªå‘½åç©ºé—´ï¼Œç›¸å½“äºä¸€ä¸ªæ²™ç›’ï¼Œåœ¨é‡Œè¾¹æ‚¨çš„æ–¹æ³•å’Œå¸¸é‡ä¸ä¼šä¸å…¶ä»–åœ°æ–¹çš„æ–¹æ³•å¸¸é‡å†²çªã€‚</p>

<p>æ¨¡å—ç±»ä¼¼ä¸ç±»ï¼Œä½†æœ‰ä¸€ä¸‹ä¸åŒï¼š</p>

<ul>
  <li>æ¨¡å—ä¸èƒ½å®ä¾‹åŒ–</li>
  <li>æ¨¡å—æ²¡æœ‰å­ç±»</li>
  <li>æ¨¡å—åªèƒ½è¢«å¦ä¸€ä¸ªæ¨¡å—å®šä¹‰</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="n">support</span><span class="p">.</span><span class="nf">rb</span>
<span class="k">module</span> <span class="nn">Week</span>
   <span class="no">FIRST_DAY</span> <span class="o">=</span> <span class="s2">"Sunday"</span>
   <span class="k">def</span> <span class="nc">Week</span><span class="o">.</span><span class="nf">weeks_in_month</span>
      <span class="nb">puts</span> <span class="s2">"You have four weeks in a month"</span>
   <span class="k">end</span>
   <span class="k">def</span> <span class="nc">Week</span><span class="o">.</span><span class="nf">weeks_in_year</span>
      <span class="nb">puts</span> <span class="s2">"You have 52 weeks in a year"</span>
   <span class="k">end</span>
<span class="k">end</span>

<span class="no">EOF</span>

<span class="n">program</span><span class="o">=</span><span class="n">module</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="p">\</span><span class="vg">$LOAD_PATH</span> <span class="o">&lt;&lt;</span> <span class="s1">'.'</span>
<span class="nb">require</span> <span class="s2">"support"</span>
 
<span class="k">class</span> <span class="nc">Decade</span>
<span class="kp">include</span> <span class="no">Week</span>
   <span class="n">no_of_yrs</span><span class="o">=</span><span class="mi">10</span>
   <span class="k">def</span> <span class="nf">no_of_months</span>
      <span class="nb">puts</span> <span class="no">Week</span><span class="o">::</span><span class="no">FIRST_DAY</span>
      <span class="n">number</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="mi">12</span>
      <span class="nb">puts</span> <span class="n">number</span>
   <span class="k">end</span>
<span class="k">end</span>
<span class="n">d1</span><span class="o">=</span><span class="no">Decade</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">puts</span> <span class="no">Week</span><span class="o">::</span><span class="no">FIRST_DAY</span>
<span class="no">Week</span><span class="p">.</span><span class="nf">weeks_in_month</span>
<span class="no">Week</span><span class="p">.</span><span class="nf">weeks_in_year</span>
<span class="n">d1</span><span class="p">.</span><span class="nf">no_of_months</span>

<span class="no">EOF</span>


<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<h3 id="mixins">Mixins</h3>

<p>Ruby ä¸ç›´æ¥æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œä½†æ˜¯ Ruby çš„æ¨¡å—ï¼ˆModuleï¼‰æœ‰å¦ä¸€ä¸ªç¥å¥‡çš„åŠŸèƒ½ã€‚å®ƒå‡ ä¹æ¶ˆé™¤äº†å¤šé‡ç»§æ‰¿çš„éœ€è¦ï¼Œæä¾›äº†ä¸€ç§åä¸º <em>mixin</em> çš„è£…ç½®ã€‚</p>

<p>Ruby æ²¡æœ‰çœŸæ­£å®ç°å¤šé‡ç»§æ‰¿æœºåˆ¶ï¼Œè€Œæ˜¯é‡‡ç”¨æˆä¸ºmixinæŠ€æœ¯ä½œä¸ºæ›¿ä»£å“ã€‚å°†æ¨¡å—includeåˆ°ç±»å®šä¹‰ä¸­ï¼Œæ¨¡å—ä¸­çš„æ–¹æ³•å°±mixè¿›äº†ç±»ä¸­ã€‚</p>

<p>ä¸‹é¢ä»£ç ä¸­ï¼š</p>

<ul>
  <li>æ¨¡å— A ç”±æ–¹æ³• a1 å’Œ a2 ç»„æˆã€‚</li>
  <li>æ¨¡å— B ç”±æ–¹æ³• b1 å’Œ b2 ç»„æˆã€‚</li>
  <li>ç±» Sample åŒ…å«äº†æ¨¡å— A å’Œ Bã€‚</li>
  <li>ç±» Sample å¯ä»¥è®¿é—®æ‰€æœ‰å››ä¸ªæ–¹æ³•ï¼Œå³ a1ã€a2ã€b1 å’Œ b2ã€‚</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=mixin.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

module A
   def a1
     puts "a1"
   end
   def a2
     puts "a2"   
   end
end
module B
   def b1
     puts "b1"   
   end
   def b2
     puts "b2"   
   end
end
 
class Sample
include A
include B
   def s1
     puts "s1"
   end
end
 
samp=Sample.new
samp.a1
samp.a2
samp.b1
samp.b2
samp.s1

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="æ—¶é—´">æ—¶é—´</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=time.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

time1 = Time.new
 
puts "å½“å‰æ—¶é—´ : " + time1.inspect
 
# Time.now åŠŸèƒ½ç›¸åŒ
time2 = Time.now
puts "å½“å‰æ—¶é—´ : " + time2.inspect

puts '----------------------------------------------'
time = Time.new
 
# Time çš„ç»„ä»¶
puts "å½“å‰æ—¶é—´ : " + time.inspect
puts time.year    # =&gt; æ—¥æœŸçš„å¹´ä»½
puts time.month   # =&gt; æ—¥æœŸçš„æœˆä»½ï¼ˆ1 åˆ° 12ï¼‰
puts time.day     # =&gt; ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤©ï¼ˆ1 åˆ° 31ï¼‰
puts time.wday    # =&gt; ä¸€å‘¨ä¸­çš„æ˜ŸæœŸå‡ ï¼ˆ0 æ˜¯æ˜ŸæœŸæ—¥ï¼‰
puts time.yday    # =&gt; 365ï¼šä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©
puts time.hour    # =&gt; 23ï¼š24 å°æ—¶åˆ¶
puts time.min     # =&gt; 59
puts time.sec     # =&gt; 59
puts time.usec    # =&gt; 999999ï¼šå¾®ç§’
puts time.zone    # =&gt; "UTC"ï¼šæ—¶åŒºåç§°

puts '----------------------------------------------'
# July 8, 2008
Time.local(2008, 7, 8)  
# July 8, 2008, 09:10amï¼Œæœ¬åœ°æ—¶é—´
Time.local(2008, 7, 8, 9, 10)   
# July 8, 2008, 09:10 UTC
Time.utc(2008, 7, 8, 9, 10)  
# July 8, 2008, 09:10:11 GMT ï¼ˆä¸ UTC ç›¸åŒï¼‰
Time.gm(2008, 7, 8, 9, 10, 11)

puts '----------------------------------------------'
time = Time.new
 
puts time.to_s
puts time.ctime
puts time.localtime
puts time.strftime("%Y-%m-%d %H:%M:%S")

puts '----------------------------------------------'
now = Time.now           # å½“å‰æ—¶é—´
puts now
 
past = now - 10          # 10 ç§’ä¹‹å‰ã€‚Time - number =&gt; Time
puts past
 
future = now + 10        # ä»ç°åœ¨å¼€å§‹ 10 ç§’ä¹‹åã€‚Time + number =&gt; Time
puts future
 
diff = future - now      # =&gt; 10  Time - Time =&gt; ç§’æ•°
puts diff

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="èŒƒå›´range">èŒƒå›´ï¼ˆRangeï¼‰</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=range.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

range1 = (1..10).to_a
range2 = ('bar'..'bat').to_a
puts "#{range1}"
puts "#{range2}"

puts '----------------------------------------------'
digits = 0..9
 
puts digits.include?(5)
ret = digits.min
puts "æœ€å°å€¼ä¸º #{ret}"
 
ret = digits.max
puts "æœ€å¤§å€¼ä¸º #{ret}"
 
ret = digits.reject {|i| i &lt; 5 }
puts "ä¸ç¬¦åˆæ¡ä»¶çš„æœ‰ #{ret}"
 
digits.each do |digit|
   puts "åœ¨å¾ªç¯ä¸­ #{digit}"
end

puts '----------------------------------------------'
score = 70
 
result = case score
when 0..40
    "ç³Ÿç³•çš„åˆ†æ•°"
when 41..60
    "å¿«è¦åŠæ ¼"
when 61..70
    "åŠæ ¼åˆ†æ•°"
when 71..100
       "è‰¯å¥½åˆ†æ•°"
else
    "é”™è¯¯çš„åˆ†æ•°"
end

puts result

puts '----------------------------------------------'
if ((1..10) === 5)
  puts "5 åœ¨ (1..10)"
end
 
if (('a'..'j') === 'c')
  puts "c åœ¨ ('a'..'j')"
end
 
if (('a'..'j') === 'z')
  puts "z åœ¨ ('a'..'j')"
end

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="è¿­ä»£å™¨iterator">è¿­ä»£å™¨ï¼ˆiteratorï¼‰</h3>

<p>è¿­ä»£å™¨ï¼ˆiteratorï¼‰æ˜¯<em>é›†åˆ</em>æ”¯æŒçš„æ–¹æ³•ã€‚å­˜å‚¨ä¸€ç»„æ•°æ®æˆå‘˜çš„å¯¹è±¡ç§°ä¸ºé›†åˆã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å°†è®¨è®ºä¸¤ç§è¿­ä»£å™¨ï¼Œ<em>each</em> å’Œ <em>collect</em>ã€‚</p>

<ul>
  <li>eachï¼š è¿­ä»£å™¨è¿”å›æ•°ç»„æˆ–å“ˆå¸Œçš„æ‰€æœ‰å…ƒç´ ã€‚</li>
  <li>collectï¼š è¿”å›æ•´ä¸ªé›†åˆï¼Œä¸ç®¡å®ƒæ˜¯æ•°ç»„æˆ–è€…æ˜¯å“ˆå¸Œã€‚æ„Ÿè§‰ç±»ä¼¼map-reduceä¸­çš„mapã€‚</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">iterator</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">ary</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">ary</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
   <span class="nb">puts</span> <span class="n">i</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">collect</span><span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="n">x</span> <span class="p">}</span>
<span class="nb">puts</span> <span class="n">b</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">collect</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="mi">10</span><span class="o">*</span><span class="n">x</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">b</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<h3 id="è¾“å…¥è¾“å‡º">è¾“å…¥è¾“å‡º</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=input_output.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------------------'
val1 = "This is variable one"
val2 = "This is variable two"
puts val1
puts val2

puts '----------------------------------------------'
puts "Enter a value :"
val = gets
puts val

puts '----------------------------------------------'
# ä¸ puts è¯­å¥ä¸åŒï¼Œputs è¯­å¥è¾“å‡ºæ•´ä¸ªå­—ç¬¦ä¸²åˆ°å±å¹•ä¸Šï¼Œè€Œ putc è¯­å¥å¯ç”¨äºä¾æ¬¡è¾“å‡ºä¸€ä¸ªå­—ç¬¦ã€‚
str="Hello Ruby!"
putc str

puts '----------------------------------------------'
# print è¯­å¥ä¸ puts è¯­å¥ç±»ä¼¼ã€‚å”¯ä¸€çš„ä¸åŒåœ¨äº puts è¯­å¥åœ¨è¾“å‡ºå†…å®¹åä¼šè·³åˆ°ä¸‹ä¸€è¡Œï¼Œè€Œä½¿ç”¨ print è¯­å¥æ—¶ï¼Œå…‰æ ‡å®šä½åœ¨åŒä¸€è¡Œã€‚
print "Hello World"
print "Good Morning"


EOF

chmod 755 $program
./$program
</code></pre></div></div>

<p><strong><a href="https://www.cnblogs.com/yjmyzz/archive/2010/02/22/1671130.html">puts,p,printçš„åŒºåˆ«</a></strong></p>

<p>puts è¾“å‡ºå†…å®¹åï¼Œä¼šè‡ªåŠ¨æ¢è¡Œ(å¦‚æœå†…å®¹å‚æ•°ä¸ºç©ºï¼Œåˆ™ä»…è¾“å‡ºä¸€ä¸ªæ¢è¡Œç¬¦å·)ï¼›å¦å¤–å¦‚æœå†…å®¹å‚æ•°ä¸­æœ‰è½¬ä¹‰ç¬¦ï¼Œè¾“å‡ºæ—¶å°†å…ˆå¤„ç†è½¬ä¹‰å†è¾“å‡º
p åŸºæœ¬ä¸putsç›¸åŒï¼Œä½†ä¸ä¼šå¤„ç†å‚æ•°ä¸­çš„è½¬ä¹‰ç¬¦å·
print åŸºæœ¬ä¸putsç›¸åŒï¼Œä½†è¾“å‡ºå†…å®¹åï¼Œä¸ä¼šè‡ªåŠ¨åœ¨ç»“å°¾åŠ ä¸Šæ¢è¡Œç¬¦</p>

<p>å¦å¤–ï¼Œåœ¨è¾“å‡ºåŒå­—èŠ‚çš„å­—ç¬¦ï¼Œæ¯”å¦‚å…¨è§’è‹±æ–‡æˆ–æ±‰å­—æ—¶ï¼Œpä¼šè¾“å‡ºå¯¹åº”çš„äºŒä¸ªå­—èŠ‚å¯¹åº”çš„æ•°å­—ï¼Œè€Œéå­—ç¬¦</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s = "aaaa\nbb\tbb"
p s
p "****************"
puts s
p "****************"
print s

s = "ä¸­"
 
p s
puts s
print s
</code></pre></div></div>

<h3 id="æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</h3>

<ul>
  <li><em>File.new</em> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <em>File</em> å¯¹è±¡ç”¨äºè¯»å–ã€å†™å…¥æˆ–è€…è¯»å†™ï¼Œè¯»å†™æƒé™å–å†³äº mode å‚æ•°ã€‚æœ€åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <em>File.close</em> æ–¹æ³•æ¥å…³é—­è¯¥æ–‡ä»¶ã€‚</li>
  <li><em>File.open</em> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„ file å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥ file å¯¹è±¡èµ‹å€¼ç»™æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œ<em>File.open</em> å’Œ <em>File.new</em> æ–¹æ³•ä¹‹é—´æœ‰ä¸€ç‚¹ä¸åŒã€‚ä¸åŒç‚¹æ˜¯ <em>File.open</em> æ–¹æ³•å¯ä¸å—å…³è”ï¼Œè€Œ <em>File.new</em> æ–¹æ³•ä¸èƒ½ã€‚</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=file.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------------------'
aFile = File.new("input.txt", "w+")
if aFile
   aFile.syswrite("ABCDEFGHIJKLKMNOPQ\nRSTUVW\nXYZ\n")
   aFile.rewind
   # æ–¹æ³• each_byte æ˜¯ä¸ªå¯ä»¥è¿­ä»£å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦
   aFile.each_byte {|ch| putc ch; putc ?. }   
else
   puts "Unable to open file!"
end
puts

puts '----------------------------------------------'
aFile = File.new("input.txt", "r")
if aFile
   content = aFile.sysread(10)
   puts content
else
   puts "Unable to open file!"
end

puts '----------------------------------------------'
arr = IO.readlines("input.txt")
puts arr[0]
puts arr[1]

puts '----------------------------------------------'
IO.foreach("input.txt"){|block| puts block}


EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="å¼‚å¸¸">å¼‚å¸¸</h3>

<ul>
  <li>ä½¿ç”¨ <em>rescue</em> å—æ•è·å¼‚å¸¸ï¼Œç„¶åä½¿ç”¨ <em>retry</em> è¯­å¥ä»å¼€å¤´å¼€å§‹æ‰§è¡Œ <em>begin</em> å—ã€‚</li>
  <li>ä½¿ç”¨ <em>raise</em> è¯­å¥æŠ›å‡ºå¼‚å¸¸</li>
  <li>ä½¿ç”¨ ensureè¯­å¥ï¼Œæ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Œä¿è¯ä¸€äº›å¤„ç†åœ¨ä»£ç å—ç»“æŸæ—¶å®Œæˆ</li>
  <li>ä½¿ç”¨ <em>else</em> å­å¥ï¼Œè¡¨ç¤ºå¦‚æœæ²¡æœ‰å¼‚å¸¸åˆ™æ‰§è¡Œï¼Œå®ƒä¸€èˆ¬æ˜¯æ”¾ç½®åœ¨ <em>rescue</em> å­å¥ä¹‹åï¼Œä»»æ„ <em>ensure</em> ä¹‹å‰ã€‚</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">exception</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>
   <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"/unexistant_file"</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">file</span>
      <span class="nb">puts</span> <span class="s2">"File opened successfully"</span>
   <span class="k">end</span>
<span class="k">rescue</span>
      <span class="n">file</span> <span class="o">=</span> <span class="no">STDIN</span>
<span class="k">end</span>
<span class="nb">print</span> <span class="n">file</span><span class="p">,</span> <span class="s2">"=="</span><span class="p">,</span> <span class="no">STDIN</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>


<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">fname</span> <span class="o">=</span> <span class="s2">"/unexistant_file"</span>
<span class="k">begin</span>
   <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">file</span>
      <span class="nb">puts</span> <span class="s2">"File opened successfully"</span>
   <span class="k">end</span>
<span class="k">rescue</span>
   <span class="n">fname</span> <span class="o">=</span> <span class="s2">"input.txt"</span>
   <span class="nb">puts</span> <span class="s1">'change file name'</span>
   <span class="k">retry</span>
<span class="k">end</span>


<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>  
    <span class="nb">puts</span> <span class="s1">'I am before the raise.'</span>  
    <span class="k">raise</span> <span class="s1">'An error has occurred.'</span>  
    <span class="nb">puts</span> <span class="s1">'I am after the raise.'</span>  
<span class="k">rescue</span>  
    <span class="nb">puts</span> <span class="s1">'I am rescued.'</span>  
<span class="k">end</span>  
<span class="nb">puts</span> <span class="s1">'I am after the begin block.'</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>  
  <span class="k">raise</span> <span class="s1">'A test exception.'</span>  
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>  
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">message</span>  
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">inspect</span>  
<span class="k">end</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>
  <span class="k">raise</span> <span class="s1">'A test exception.'</span>
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">message</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">inspect</span>
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s2">"Ensuring execution"</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>
 <span class="c1"># æŠ›å‡º 'A test exception.'</span>
 <span class="nb">puts</span> <span class="s2">"I'm not raising exception"</span>
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">message</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">inspect</span>
<span class="k">else</span>
   <span class="nb">puts</span> <span class="s2">"Congratulations-- no errors!"</span>
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s2">"Ensuring execution"</span>
<span class="k">end</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<p><strong>Catch å’Œ Throw</strong></p>

<p>raise å’Œ rescue çš„å¼‚å¸¸æœºåˆ¶èƒ½åœ¨å‘ç”Ÿé”™è¯¯æ—¶æ”¾å¼ƒæ‰§è¡Œï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨æ­£å¸¸å¤„ç†æ—¶è·³å‡ºä¸€äº›æ·±å±‚åµŒå¥—çš„ç»“æ„ã€‚æ­¤æ—¶ catch å’Œ throw å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>

<p><em>catch</em> å®šä¹‰äº†ä¸€ä¸ªä½¿ç”¨ç»™å®šçš„åç§°ï¼ˆå¯ä»¥æ˜¯ Symbol æˆ– Stringï¼‰ä½œä¸ºæ ‡ç­¾çš„å—ã€‚å—ä¼šæ­£å¸¸æ‰§è¡Œç›´åˆ°é‡åˆ°ä¸€ä¸ª throwã€‚</p>

<p>ä¸‹é¢ä¾‹å­ä¸­ï¼Œç”¨æˆ·é”®å…¥ â€˜!â€™ å›åº”ä»»ä½•æç¤ºï¼Œä½¿ç”¨ä¸€ä¸ª throw ç»ˆæ­¢ä¸ç”¨æˆ·çš„äº¤äº’ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=try.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

def promptAndGet(prompt)
   print prompt
   res = readline.chomp
   throw :quitRequested if res == "!"
   return res
end
 
catch :quitRequested do
   name = promptAndGet("Name: ")
   age = promptAndGet("Age: ")
   sex = promptAndGet("Sex: ")
   # ..
   # å¤„ç†ä¿¡æ¯
end



EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li><a href="https://www.ruby-lang.org/zh_cn/documentation/quickstart/">20 minutes quickstart</a></li>
  <li><a href="https://www.runoob.com/ruby/ruby-tutorial.html">Ruby æ•™ç¨‹</a></li>
</ul>

:ET