<!DOCTYPE html>
<html>
	
<!-- include head.html -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
	<link rel="manifest" href="/icons/manifest.json">
	<link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="/icons/favicon.ico">
	<meta name="msapplication-config" content="/icons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">

	<title>Your awesome title</title>

	<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search resu...">

	<link rel="stylesheet" href="/assets/main.css">
	<link rel="canonical" href="http://0.0.0.0:4000/">
	<link rel="alternate" type="application/rss+xml" title="Your awesome title" href="/feed.xml">
</head>
<!-- end of include head.html -->

	
  	<body class="body-panel">
<!-- include banner-area.html -->
<input type="checkbox" id="banner-menu-symbol">
<div class="banner-area banner-area-in-dom">
	<div class="banner"></div>
	<div class="icon-container">
		
<!-- include banner-icon.html -->
<div class="banner-icon"></div>
<!-- end of include banner-icon.html -->

	</div>
	<div class="title-area-container">
		
<!-- include banner-title-area.html -->
<div class="title-area">
	<div class="title">
		<p>Your awesome title</p>
	</div>
	<div class="subtitle">
		<p>easy to use and highly customizable</p>
	</div>
</div>
<!-- end of include banner-title-area.html -->

	</div>
	<div class="label-container"><label for="banner-menu-symbol"><p><!-- empty but necessary! --></p></label></div>
	<div class="menubar-top-separator"></div>
	
<!-- include menubar.html -->
<nav class="menubar">
<!-- include menubar-icon.html -->
<div class="menubar-icon"></div>
<!-- end of include menubar-icon.html -->

	<div class="item isActiveSelection">
		<div class="title">
			<label class="symbol"><p></p></label>
			<div class="text"><a href="http://0.0.0.0:4000/index.html"><p>Home</p></a></div>
		</div>
	</div>
</nav>
<!-- end of include menubar.html -->

	<div class="menubar-bottom-separator"></div>
</div><!-- end of include banner-area.html -->


		<div class="column-panel">
			<div class="secondary-column">
				<div class="secondary-column-content">
		
<!-- include secondary-column.html -->
<div class="secondary-widget-separator"></div>

<div class="widget">

<!-- include recent-posts.html -->
<div>
	<h1>Recent:</h1>
		<p><a href="/jekyll/update/2019/10/16/welcome-to-jekyll.html">2019-10-16 Welcome to Jekyll!</a></p>
		<p><a href="/language/2019/10/15/jekyll.html">2019-10-15 jekyll</a></p>
		<p><a href="/others/2019/06/24/take_notes_ppt.html">2019-06-24 记笔记</a></p>
		<p><a href="/2018/10/23/ruby.html">2018-10-23 Default Title</a></p>
</div>
<!-- end of include recent-posts.html -->

</div>

<div class="widget-separator"></div>

<div class="widget">

<!-- include social-media.html -->
<div>
	<h1>Social Media & Resources:</h1>
		<div>
	
<!-- include icon-github.html -->
<a href="https://github.com/jekyll">
	<span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg></span>
	<span class="username">jekyll</span>
</a>
<!-- end of include icon-github.html -->

		</div>
		<div>
	
<!-- include icon-twitter.html -->
<a href="https://twitter.com/jekyllrb">
	<span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg></span>
	<span class="username">jekyllrb</span>
</a>
<!-- end of include icon-twitter.html -->

		</div>
</div>
<!-- end of include social-media.html -->

</div>

<div class="widget-separator"></div>

<div class="widget">

<!-- include subscribe.html -->
<div>
	<h1>Subscribe:</h1>
	<p class="rss-subscribe"><a href="/feed.xml">via RSS</a></p>
</div>
<!-- end of include subscribe.html -->

</div>

<div class="widget-separator"></div>

<div class="widget">

<!-- include older-posts.html -->
<div class="older-posts">
	<h1>Older Posts:</h1>
	<details class="year-details">
		<summary>2019</summary>
		<details class="month-details">
			<summary>October</summary>
			<a href="/jekyll/update/2019/10/16/welcome-to-jekyll.html"><p>Welcome to Jekyll!</p></a>
			<a href="/language/2019/10/15/jekyll.html"><p>jekyll</p></a>
		</details>
		<details class="month-details">
			<summary>June</summary>
			<a href="/others/2019/06/24/take_notes_ppt.html"><p>记笔记</p></a>
		</details>
	</details>
	<details class="year-details">
		<summary>2018</summary>
		<details class="month-details">
			<summary>October</summary>
			<a href="/2018/10/23/ruby.html"><p>Default Title</p></a>
		</details>
	</details>
</div>
<!-- end of include older-posts.html -->

</div>

<div class="widget-separator"></div>

<div class="widget">

<!-- include categories.html --><div class="categories">
	<input type="checkbox" id=category-checkboxa>
	<label for=category-checkboxa><h1>Categories</h1></label>
	<div class="text"><p>None</p></div>
</div>
<!-- end of include categories.html -->

</div>
<!-- end of include secondary-column.html -->

				</div>	
				<div class="tertiary-column-content">
			
<!-- include tertiary-column.html -->
<div class="tertiary-widget-separator"></div>
<div class="widget">

<!-- include browser-info.html -->
<div class="browser-info">
	<h1>Browser information:</h1>
	<p>This website uses CSS3 & HTML5. It is recommended to use a modern browser with at least the following version number:</p>
	<ul>
		<li>Chrome 29.0</li>
		<li>Edge 12.0</li>
		<li>Explorer 11.0</li>
		<li>Firefox 28.0</li>
		<li>Safari 9.0</li>
		<li>Opera 17.0</li>
	</ul>
	<p>Problems? please <a href="/pages/contact/contact.html">contact</a> me.</p>
</div>
<!-- end of include browser-info.html -->

</div>
<!-- end of include tertiary-column.html -->

				</div>
			</div>
			<div class="secondary-separator"></div>

			<div class="primary-column">
				<main>

<!-- Start of main content -->
<div><h1>Posts</h1>
	
<!--	
 --><h2><a href="/jekyll/update/2019/10/16/welcome-to-jekyll.html">Welcome to Jekyll!</a></h2>
    <span class="post-meta">2019-10-16</span>
    
    <div><p>You’ll find this post in your <code class="highlighter-rouge">_posts</code> directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run <code class="highlighter-rouge">jekyll serve</code>, which launches a web server and auto-regenerates your site when a file is updated.</p>

<p>Jekyll requires blog post files to be named according to the following format:</p>

<p><code class="highlighter-rouge">YEAR-MONTH-DAY-title.MARKUP</code></p>

<p>Where <code class="highlighter-rouge">YEAR</code> is a four-digit number, <code class="highlighter-rouge">MONTH</code> and <code class="highlighter-rouge">DAY</code> are both two-digit numbers, and <code class="highlighter-rouge">MARKUP</code> is the file extension representing the format used in the file. After that, include the necessary front matter. Take a look at the source for this post to get an idea about how it works.</p>

<p>Jekyll also offers powerful support for code snippets:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">print_hi</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
<span class="n">print_hi</span><span class="p">(</span><span class="s1">'Tom'</span><span class="p">)</span>
<span class="c1">#=&gt; prints 'Hi, Tom' to STDOUT.</span></code></pre></figure>

<p>Check out the <a href="https://jekyllrb.com/docs/home">Jekyll docs</a> for more info on how to get the most out of Jekyll. File all bugs/feature requests at <a href="https://github.com/jekyll/jekyll">Jekyll’s GitHub repo</a>. If you have questions, you can ask them on <a href="https://talk.jekyllrb.com/">Jekyll Talk</a>.</p>

</div><h2><a href="/language/2019/10/15/jekyll.html">jekyll</a></h2>
    <span class="post-meta">2019-10-15</span>
    
    <div><p>Jekyll 是一个简单的博客形态的静态站点生产机器。它有一个模版目录，其中包含原始文本格式的文档，通过一个转换器（如 <a href="http://daringfireball.net/projects/markdown/">Markdown</a>）和我们的 <a href="https://github.com/Shopify/liquid/wiki">Liquid</a> 渲染器转化成一个完整的可发布的静态网站，你可以发布在任何你喜爱的服务器上。Jekyll 也可以运行在 <a href="http://pages.github.com/">GitHub Page</a> 上，也就是说，你可以使用 GitHub 的服务来搭建你的项目页面、博客或者网站，而且是<strong>完全免费</strong>的。</p>

<h1 id="1-入门">1. 入门</h1>

<h2 id="11-安装">1.1 安装</h2>

<h3 id="111-jekyll">1.11 Jekyll</h3>

<h4 id="手动安装"><a href="https://www.jekyll.com.cn/docs/">手动安装</a></h4>

<ol>
  <li>
    <p>安装一个完整的 <a href="ruby.md">Ruby 开发环境</a></p>
  </li>
  <li>
    <p>安装 Jekyll 和<a href="https://www.jekyll.com.cn/docs/ruby-101/#bundler">bundler</a> <a href="https://www.jekyll.com.cn/docs/ruby-101/#gems">gems</a></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install jekyll bundler  --http-proxy $http_proxy
</code></pre></div>    </div>
  </li>
  <li>
    <p>在./myblog目录下创建一个全新的 Jekyll 网站</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll new myblog
</code></pre></div>    </div>
  </li>
  <li>
    <p>进入新创建的目录</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd myblog
echo  &gt;&gt; _config.yml
echo host: 0.0.0.0 &gt;&gt; _config.yml
echo port: 4000    &gt;&gt; _config.yml
</code></pre></div>    </div>
  </li>
  <li>
    <p>构建网站并启动一个本地 web服务</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle exec jekyll serve
</code></pre></div>    </div>
  </li>
  <li>
    <p>在浏览器中打开 <a href="http://localhost:4000/">http://localhost:4000</a> 网址</p>
  </li>
</ol>

<h4 id="docker安装"><a href="https://github.com/envygeeks/jekyll-docker/blob/master/README.md">Docker安装</a></h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir -p docker-myblog
mkdir -p docker-myblog/vendor/bundle
cd docker-myblog
echo host: 0.0.0.0 &gt; _config.yml
echo port: 4000    &gt;&gt; _config.yml

docker run  \
  --volume="$PWD:/srv/jekyll" \
  --volume="$PWD/vendor/bundle:/usr/local/bundle" \
  -it jekyll/jekyll:latest \
  jekyll build
  
docker run -d \
  --volume="$PWD:/srv/jekyll" \
  --volume="$PWD/vendor/bundle:/usr/local/bundle" \
  -it jekyll/jekyll:latest \
  jekyll build  
</code></pre></div></div>

<h2 id="tutorial"><a href="https://jekyllrb.com/tutorials/home/">Tutorial</a></h2>

</div><h2><a href="/others/2019/06/24/take_notes_ppt.html">记笔记</a></h2>
    <span class="post-meta">2019-06-24</span>
    
    <div><!-- page_number: true -->

<h1 id="记笔记">记笔记</h1>

<h6 id="created-by-xu-jian">Created by Xu Jian</h6>
<h6 id="may-2019">May, 2019</h6>

<p><img src="image/pexels-photo-373076.jpeg" alt="bg" /></p>

<hr />

<h1 id="前言">前言</h1>

<p>作为一个技术宅，很喜欢学习一些自己感兴趣的技术，在学习的过程中，深感记笔记非常的重要。</p>

<hr />

<h1 id="笔记">笔记</h1>

<p>笔记记得好，即使过上几年，再次翻看，还能记忆犹新。</p>

<hr />

<h2 id="笔记类别">笔记类别</h2>

<p>从程序员的眼中，笔记可以分为：</p>

<ul>
  <li>信息：任何你想记录的</li>
  <li>代码：程序代码</li>
  <li>文档：个人，项目或者团队的活动中的内容</li>
  <li>交互文档：混合了代码，图表和文档</li>
  <li>文章：相对正式，常用wiki，blog等发布</li>
</ul>

<blockquote>
  <p><em>一篇笔记，可以属于多个类别</em></p>
</blockquote>

<hr />

<h3 id="交互文档jupyter-notebook-zeppelin">交互文档：jupyter notebook， zeppelin</h3>

<p>学习Spark的时，接触了zeppelin，它采用scala和sql等语言编写代码，用markdown来编写文档。</p>

<p><img src="image/ApacheZeppelin_02.jpg" alt="Apache Zeppelin" /></p>

<blockquote>
  <p><em><a href="http://15.15.165.218:18888/notebooks/eipi10/xuxiangwen.github.io/base/model_evaluation.ipynb">juputer notebook example</a></em></p>
</blockquote>

<hr />

<h2 id="什么是好笔记">什么是好笔记</h2>

<ul>
  <li>好理解： 好的笔记是容易理解的</li>
  <li>易于复现：好的笔记，也应该是容易被重现的</li>
  <li>持续更新</li>
</ul>

<p><img src="image/1557704516822.png" alt="1557704516822" /></p>

<hr />

<h2 id="笔记的安全性">笔记的安全性</h2>

<p>笔记发布的安全性非常重要。不同的笔记也有不同的发布范围。</p>

<ul>
  <li>
    <p>Internet：</p>

    <ul>
      <li>公开。没有安全性限制</li>
      <li>私有。信息是私有的，但可以授权任意的人员来访问</li>
    </ul>
  </li>
</ul>

<hr />

<ul>
  <li>
    <p>公司：仅在公司内部网络才可以访问。</p>

    <ul>
      <li>公司/部门：信息在公司或部门内部是公开的</li>
      <li>项目：信息在项目组内部是公开的</li>
      <li>私有：信息是私有的，可以授权公司同事访问</li>
    </ul>
  </li>
</ul>

<hr />

<h1 id="工具">工具</h1>

<p>任何工具的流行，离不开需求，也离不开合适的环境。</p>

<hr />

<h2 id="历史">历史</h2>

<p>个人而言，使用的工具经历了以下的过程。</p>
<ul>
  <li>原始社会：文本文件，word，excel文件</li>
  <li>工业时代：evernote， onenote， 有道云笔记</li>
  <li>信息时代：zeppelin，jupyter notebook + 思维导图</li>
  <li>互联时代：  github(pages, wiki) + typora(markdown) + pandoc …</li>
</ul>

<blockquote>
  <p><em>以上这些工具，我们都会混合使用，没有一种工具可以解决所有的问题。</em></p>
</blockquote>

<hr />

<h3 id="原始社会文本文件wordexcel文件">原始社会：文本文件，word，excel文件</h3>

<p>文件分散在计算机的各处，时间长了，放在哪里都忘了，查找起来很不方便。</p>

<p><img src="image/ximg_5b6e4770e6897.jpg.pagespeed.gp+jp+jw+pj+ws+js+rj+rp+rw+ri+cp+md.ic.tfq1D0waRx.jpg" alt="" /></p>

<hr />

<h3 id="工业时代evernote-onenote-有道云笔记">工业时代：evernote， onenote， 有道云笔记</h3>

<p><img src="image/CNHome_Image1_v2.png" alt="" /></p>

<hr />

<h3 id="信息时代zeppelinjupyter-notebook--思维导图">信息时代：zeppelin，jupyter notebook + 思维导图</h3>

<p><img src="image/jupyterpreview.png" alt="" /></p>

<hr />

<h4 id="思维导图">思维导图</h4>

<p>思维导图，则另辟蹊径，是表达发散性思维的有效图形思维工具。</p>

<p><img src="image/1557381669838.png" alt="" /></p>

<hr />

<h3 id="互联时代--githubpages-wiki--typoramarkdown---pandoc-">互联时代：  github(pages, wiki) + typora(markdown) +  pandoc …</h3>

<p>面临的问题：</p>
<ul>
  <li>工具的强大，造成笔记太多，如何使笔记更有价值？</li>
  <li>学习时记笔记，开发时写文档，分享时写ppt，如何用统一的方式来管理？</li>
</ul>

<hr />

<h4 id="分享">分享</h4>

<p>知识的根本目的和价值是分享。</p>

<p><img src="image/pic1_0.png" alt="" /></p>

<blockquote>
  <p><em>当需要分享知识的时候，往往会花上心思，这使得知识更易于理解，更加有价值。</em></p>
</blockquote>

<hr />

<h4 id="流程">流程</h4>

<p><img src="image/1557703072934.png" alt="1557703072934" /></p>

<hr />

<pre><code class="language-mermaid">graph LR; 
    CE --&gt; Git((Git));  
    Information--&gt;|md|MDE[Markdown Editor: Typora];   
    Document--&gt;|md|MDE;
    Article--&gt;|md|MDE;    
    ID[Interactive Doc]--&gt;NE[Notebook Editor: Jupyter];
    code --&gt; CE(Code Editor);  
    MDE--&gt;Others[ppt, pdf, word, html];
    NE--&gt;Others;    
    MDE--&gt; Git; 
    NE--&gt; Git;
    Git--&gt;GE["Github Enterprise(pages, wiki)"];
    Git--&gt;GitHub["Github(pages, wiki)"];    
</code></pre>

<hr />

<h4 id="github-pages"><a href="https://pages.github.com">GitHub Pages</a></h4>

<p>GitHub Pages is a static site hosting service designed to host your personal, organization, or project pages directly from a GitHub repository…</p>

<p><a href="http://www.youtube.com/watch?v=2MsN8gpT6jY" title="What is GitHub Pages?"><img src="http://img.youtube.com/vi/2MsN8gpT6jY/0.jpg" alt="What is GitHub Pages?" /></a></p>

<blockquote>
  <p><a href="https://github.com/showcases/github-pages-examples">Projects using GitHub Pages</a>
<a href="https://github.com/showcases/open-source-organizations">Open source organizations using GitHub Pages</a></p>
</blockquote>

<hr />

<h4 id="github-wiki"><a href="https://help.github.com/en/articles/about-wikis">GitHub Wiki</a></h4>

<p>host documentation for your repository in a wiki.</p>

<blockquote>
  <p><a href="https://rndwiki.corp.hpicorp.net/confluence/display/DSCDC/Solution+Architecture">confluence</a>
<a href="https://github.azc.ext.hp.com/jian-xu3/user-profile/wiki">wechat user profile</a></p>
</blockquote>

<hr />

<h2 id="github-pages-wiki的最大优势流量优势">GitHub Pages, Wiki的最大优势：流量优势!</h2>

<hr />

<h4 id="typora"><a href="https://typora.io/">Typora</a></h4>
<p>will give you a seamless experience as both a reader and a writer.</p>

<ul>
  <li>markdown</li>
  <li>image enhanced</li>
</ul>

<blockquote>
  <p><a href="..\math\eigenvector-singular.md">example eigenvector-singular.md</a></p>
</blockquote>

<hr />

<h4 id="markdown">Markdown</h4>

<p>is a lightweight markup language with plain text formatting syntax. Its design allows it to be converted to many output formats</p>

<p><img src="image/markdown.png" alt="" /></p>

<hr />

<h4 id="markdown-vs-word">Markdown vs. Word</h4>

<ul>
  <li>
    <p>内容与形式分离 vs 所见即所得（内容与形式融合）</p>

    <ul>
      <li>专注内容书写：Markdown 胜</li>
      <li>调整排版：Markdown 胜</li>
      <li>文档发布和阅读：Markdown 胜</li>
    </ul>
  </li>
  <li>
    <p>源码输入 vs 所见即所得</p>

    <ul>
      <li>
        <p>严谨性：Markdown 胜</p>
      </li>
      <li>
        <p>功能：Word 胜</p>

        <ul>
          <li>图片支持： Word 略胜</li>
          <li>表格支持： Word 胜</li>
        </ul>
      </li>
      <li>
        <p>显示和上手难度： Word 胜</p>
      </li>
      <li>
        <p>书写流畅性： Markdown 胜</p>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h4 id="pandoc">Pandoc</h4>

<p>Pandoc是一个标记语言转换工具，可实现不同标记语言间的<a href="https://pandoc.org/diagram.jpg">格式转换</a>，堪称该领域中的“瑞士军刀”。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pandoc <span class="nt">-t</span> revealjs <span class="nt">-s</span> take_notes_ppt.md <span class="se">\</span>
       <span class="nt">-o</span> take_notes_ppt.html <span class="se">\</span>
       <span class="nt">-V</span> revealjs-url<span class="o">=</span>https://revealjs.com <span class="se">\</span>
       <span class="nt">-V</span> <span class="nv">theme</span><span class="o">=</span>moon
</code></pre></div></div>

<hr />

<h2 id="工具的要求">工具的要求</h2>

<p>并不是对单一工具的，而是对于所用的工具集来说的。</p>

<ul>
  <li>简单易用</li>
  <li>多种格式： 信息，文档，表格，代码，图表都能支持。</li>
  <li>编辑方便。不方便的例子有jupyter notebook添加图片麻烦</li>
  <li>快速检索。不好的例子有有道云笔记的搜索功能</li>
  <li>易于分享。支持分享到项目，部门，公司或互联网。</li>
</ul>

<hr />

<h2 id="microsoft-teams--onenote-"><a href="https://teams.microsoft.com/l/team/19%3a129aaf7cba7a4aaaa63e3a0ba2d62974%40thread.skype/conversations?groupId=86e56ee6-d7c1-4577-8d2e-cc4a31e0eba9&amp;tenantId=ca7981a2-785a-463d-b82a-3db87dfc3ce6&gt;">Microsoft Teams</a> + OneNote …</h2>

<p><img src="image/1557710385911.png" alt="1557710385911" /></p>

<blockquote>
  <p><a href="https://hp.sharepoint.com/sites/ChinaITBBS/_layouts/15/WopiFrame.aspx?sourcedoc={4a88b013-0cfe-47c7-8aad-44b814ce33dd}&amp;action=editnew">China IT  BBS OneNote</a></p>
</blockquote>

<hr />

<h2 id="teams--onenote--vs-github--typora-">teams + onenote … vs. github + typora …</h2>

<table>
  <thead>
    <tr>
      <th>requirement</th>
      <th style="text-align: left">teams</th>
      <th>github</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>简单易用</td>
      <td style="text-align: left">5</td>
      <td>3</td>
      <td>后者复杂的多</td>
    </tr>
    <tr>
      <td>多种格式</td>
      <td style="text-align: left">4</td>
      <td>4</td>
      <td>前者对代码的支持不够好</td>
    </tr>
    <tr>
      <td>编辑方便</td>
      <td style="text-align: left">5</td>
      <td>4</td>
      <td>前者功能强大，但后者善于精细化的控制</td>
    </tr>
    <tr>
      <td>快速检索</td>
      <td style="text-align: left">4</td>
      <td>5</td>
      <td>由于纯文本和开放性，后者可以实现超强的搜索功能</td>
    </tr>
    <tr>
      <td>易于分享</td>
      <td style="text-align: left">4</td>
      <td>5</td>
      <td>前者适合内部分享，后者无限制</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="teams--onenote--vs-github--typora--1">teams + onenote … vs. github + typora …</h2>

<ul>
  <li>总体上两套工具集合都很强大。
    <ul>
      <li>teams + onenote 简单易用，更加成熟</li>
      <li>github + typora 开放自由，扩展性更好</li>
    </ul>
  </li>
  <li>对于程序员来说，github + typora 更有诱惑性。</li>
</ul>

<hr />

<h2 id="总结">总结</h2>

<p>无论使用任何工具，无论如何记笔记，只要让更多知识得到更好的分享，就能获得更大价值。</p>

<hr />

<h2 id="参考">参考</h2>

<ul>
  <li><a href="https://www.zhihu.com/question/21438053">学习编程用什么做笔记比较好？</a></li>
  <li><a href="https://sspai.com/post/37340">反思Markdown：Markdown的长与短</a></li>
  <li><a href="https://mazhuang.org/2017/09/01/markdown-odd-skills">关于 Markdown 的一些奇技淫巧</a></li>
  <li><a href="https://zhuanlan.zhihu.com/p/44998516">Typora - 不要太棒的Markdown编辑器</a></li>
  <li><a href="https://www.zybuluo.com/mdeditor">Cmd Markdown 编辑阅读器</a> : 在线Markdown编辑器。</li>
  <li><a href="https://pandoc.org/MANUAL.html#producing-slide-shows-with-pandoc">Producing slide shows with pandoc</a></li>
  <li><a href="https://mermaidjs.github.io/mermaid-live-editor">mermaid live editor</a></li>
  <li><a href="https://pages.github.com">GitHub Pages</a></li>
  <li><a href="http://jmcglone.com/guides/github-pages">Creating and Hosting a Personal Site on GitHub</a>: 非常好的入门guide</li>
</ul>

<hr />

<h1 id="thank-you-smile">Thank You :smile:</h1>
<h2 id="thank-you-smile-1">Thank you :smile:</h2>
<h3 id="thank-you-smile-2">Thank you :smile:</h3>
<h4 id="thank-you-smile-3">Thank you :smile:</h4>
<h5 id="thank-you-smile-4">Thank you :smile:</h5>
<h6 id="thank-you-smile-5">Thank you :smile:</h6>

</div><h2><a href="/2018/10/23/ruby.html">Default Title</a></h2>
    <span class="post-meta">2018-10-23</span>
    
    <div><h2 id="ruby安装">ruby安装</h2>

<p><strong>安装rbenv</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer | bash
<span class="nb">echo</span> <span class="s1">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">echo eval</span> <span class="se">\"\$\(</span>rbenv init -<span class="se">\)\"</span> <span class="o">&gt;&gt;</span>  ~/.bashrc
<span class="nb">source</span> ~/.bashrc

rbenv <span class="nt">-v</span>
</code></pre></div></div>

<p><strong>安装ruby</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum remove <span class="nt">-y</span> ruby
<span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> readline-devel
<span class="nv">ruby_file</span><span class="o">=</span>~/.rbenv/cache/ruby-2.6.5.tar.bz2
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$ruby_file</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span>wget <span class="s1">'https://cache.ruby-china.com/pub/ruby/2.6/ruby-2.6.5.tar.bz2'</span> <span class="nt">-P</span> ~/.rbenv/cache
<span class="k">fi
</span>rbenv <span class="nb">install </span>2.6.5
rbenv global 2.6.5
rbenv versions

ruby <span class="nt">-v</span>

</code></pre></div></div>

<p><strong>检查安装</strong></p>

<pre><code class="language-SHELL">curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash
ruby -v
</code></pre>

<p>如果输出如下信息，表示</p>

<p><img src="image/1571194274287.png" alt="1571194274287" /></p>

<h2 id="进入interactive-ruby">进入Interactive Ruby</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span>
</code></pre></div></div>

<h2 id="入门">入门</h2>

<h3 id="hello-world">hello world*</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"Hello World"</span>
<span class="nb">puts</span> <span class="s2">"Hello World"</span>
<span class="mi">3</span><span class="o">+</span><span class="mi">2</span>
<span class="no">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="函数">函数</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">h</span>
<span class="nb">puts</span> <span class="s2">"Hello World!"</span>
<span class="k">end</span>

<span class="n">h</span>
<span class="n">h</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span>
<span class="k">end</span>

<span class="n">h</span><span class="p">(</span><span class="s2">"Matz"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="nb">name</span> <span class="o">=</span> <span class="s2">"world"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="p">.</span><span class="nf">capitalize</span><span class="si">}</span><span class="s2">!"</span>
<span class="k">end</span>

<span class="n">h</span> <span class="s2">"chris"</span>
<span class="n">h</span>
</code></pre></div></div>

<h3 id="类">类</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Greeter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span> <span class="o">=</span> <span class="s2">"World"</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">say_hi</span>
    <span class="nb">puts</span> <span class="s2">"Hi </span><span class="si">#{</span><span class="vi">@name</span><span class="si">}</span><span class="s2">!"</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">say_bye</span>
    <span class="nb">puts</span> <span class="s2">"Bye </span><span class="si">#{</span><span class="vi">@name</span><span class="si">}</span><span class="s2">, come back soon."</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">g</span> <span class="o">=</span> <span class="no">Greeter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Pat"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">say_hi</span>
<span class="n">g</span><span class="p">.</span><span class="nf">say_bye</span>
<span class="n">g</span><span class="o">.</span><span class="vi">@name</span>      <span class="c1"># 无法访问</span>

<span class="c1"># 显示实例函数</span>
<span class="no">Greeter</span><span class="p">.</span><span class="nf">instance_methods</span>
<span class="no">Greeter</span><span class="p">.</span><span class="nf">instance_methods</span><span class="p">(</span><span class="kp">false</span><span class="p">)</span>

<span class="n">g</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"say_hi"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"to_s"</span><span class="p">)</span>
</code></pre></div></div>

<p>获取实例变量名。在 Ruby 里，您可以把一个类打开然后改变它。这些改变会对以后生成的甚至是已经生成的对象产生即时效果。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Greeter
  attr_accessor :name
end

g = Greeter.new("Andy")
g.respond_to?("name")
g.respond_to?("name=")
g.say_hi
g.name="Betty"

g
Greeter.instance_methods(false)
</code></pre></div></div>

<p>更加完整的例子：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="n">ri20min</span><span class="p">.</span><span class="nf">rb</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="k">class</span> <span class="nc">MegaGreeter</span>
  <span class="nb">attr_accessor</span> <span class="ss">:names</span>

  <span class="c1"># Create the object</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">names</span> <span class="o">=</span> <span class="s2">"World"</span><span class="p">)</span>
    <span class="vi">@names</span> <span class="o">=</span> <span class="n">names</span>
  <span class="k">end</span>

  <span class="c1"># Say hi to everybody</span>
  <span class="k">def</span> <span class="nf">say_hi</span>
    <span class="k">if</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="nb">puts</span> <span class="s2">"..."</span>
    <span class="k">elsif</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"each"</span><span class="p">)</span>
      <span class="c1"># @names is a list of some kind, iterate!</span>
      <span class="vi">@names</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
        <span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span>
      <span class="k">end</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="vi">@names</span><span class="si">}</span><span class="s2">!"</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># Say bye to everybody</span>
  <span class="k">def</span> <span class="nf">say_bye</span>
    <span class="k">if</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="nb">puts</span> <span class="s2">"..."</span>
    <span class="k">elsif</span> <span class="vi">@names</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="s2">"join"</span><span class="p">)</span>
      <span class="c1"># Join the list elements with commas</span>
      <span class="nb">puts</span> <span class="s2">"Goodbye </span><span class="si">#{</span><span class="vi">@names</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span><span class="si">}</span><span class="s2">.  Come back soon!"</span>
    <span class="k">else</span>
      <span class="nb">puts</span> <span class="s2">"Goodbye </span><span class="si">#{</span><span class="vi">@names</span><span class="si">}</span><span class="s2">.  Come back soon!"</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>


<span class="k">if</span> <span class="kp">__FILE__</span> <span class="o">==</span> <span class="p">\</span><span class="vg">$0</span>
  <span class="n">mg</span> <span class="o">=</span> <span class="no">MegaGreeter</span><span class="p">.</span><span class="nf">new</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>

  <span class="c1"># Change name to be "Zeke"</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">names</span> <span class="o">=</span> <span class="s2">"Zeke"</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>

  <span class="c1"># Change the name to an array of names</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Albert"</span><span class="p">,</span> <span class="s2">"Brenda"</span><span class="p">,</span> <span class="s2">"Charles"</span><span class="p">,</span>
    <span class="s2">"Dave"</span><span class="p">,</span> <span class="s2">"Engelbert"</span><span class="p">]</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>

  <span class="c1"># Change to nil</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">names</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_hi</span>
  <span class="n">mg</span><span class="p">.</span><span class="nf">say_bye</span>
<span class="k">end</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="n">ri20min</span><span class="p">.</span><span class="nf">rb</span>
<span class="p">.</span><span class="nf">/</span><span class="n">ri20min</span><span class="p">.</span><span class="nf">rb</span>
</code></pre></div></div>

<h3 id="irb支持中文">irb支持中文</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export LANG=en_US.UTF-8
irb
puts "你好，世界！";
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ruby -e 'puts Encoding.find("locale")'
</code></pre></div></div>

<h3 id="here-document">Here Document</h3>

<p>“Here Document” 是指建立多行字符串。在 « 之后，您可以指定一个字符串或标识符来终止字符串，且当前行之后直到终止符为止的所有行是字符串的值。</p>

<p>如果终止符用引号括起，引号的类型决定了面向行的字符串类型。请注意« 和终止符之间必须没有空格。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &lt;&lt; SEOF &gt; here_document.rb
#!/usr/bin/env ruby
# -*- coding : utf-8 -*-
 
print &lt;&lt;EOF
    这是第一种方式创建here document 。
    多行字符串。
EOF
 
print &lt;&lt;"EOF";                # 与上面相同
    这是第二种方式创建here document 。
    多行字符串。
EOF
 
print &lt;&lt;\`EOC\`                 # 执行命令
    echo hi there
    echo lo there
EOC
 
print &lt;&lt;"foo", &lt;&lt;"bar"          # 您可以把它们进行堆叠
    I said foo.
foo
    I said bar.
bar

SEOF

chmod 755 here_document.rb
./here_document.rb
</code></pre></div></div>

<h3 id="begin-end">Begin End</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">begin_end</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">puts</span> <span class="s2">"这是主 Ruby 程序"</span>
 
<span class="k">END</span> <span class="p">{</span>
   <span class="nb">puts</span> <span class="s2">"停止 Ruby 程序"</span>
<span class="p">}</span>
<span class="k">BEGIN</span> <span class="p">{</span>
   <span class="nb">puts</span> <span class="s2">"初始化 Ruby 程序"</span>
<span class="p">}</span>
<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<h3 id="集合">集合</h3>

<ul>
  <li>array</li>
  <li>hash</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=collection.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------'
ary = [ "fred", 10, 3.14, "This is a string", "last element", ]
ary.each do |i|
    puts i
end

puts '----------------------------------'
hsh = colors = { "red" =&gt; 0xf00, "green" =&gt; 0x0f0, "blue" =&gt; 0x00f }
hsh.each do |key, value|
    print key, " is ", value, "\n"
end

puts '----------------------------------'
(10..15).each do |n|
    print n, ' '
end
print "\n" 

puts '----------------------------------'
nums = Array.new(10) { |e| e = e * 2 }
puts "#{nums}"


puts '----------------------------------'
months = Hash.new( "month" )
 
puts "#{months[0]}"
puts "#{months[72]}"
puts months


EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="双引号和单引号区别">双引号和单引号区别</h3>

<p>双引号里面可以 interpolation 以及 escape 。单引号不可以。单引号字符串字面量里只可以用反斜线来转义单引号和反斜线。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a = 1
"#{a}"
'#{a}'
puts "a\nb"
puts 'a\nb'
</code></pre></div></div>

<h3 id="变量">变量</h3>

<p>Ruby 支持五种类型的变量。</p>

<ul>
  <li>一般小写字母、下划线开头：变量（Variable）。</li>
  <li><code class="highlighter-rouge">$</code>开头：全局变量（Global variable）。</li>
  <li><code class="highlighter-rouge">@</code>开头：实例变量（Instance variable）。</li>
  <li><code class="highlighter-rouge">@@</code>开头：类变量（Class variable）类变量被共享在整个继承链中</li>
  <li>大写字母开头：常数（Constant）。</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">variable</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="p">\</span><span class="vg">$global_variable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">class</span> <span class="nc">Class1</span>
  <span class="k">def</span> <span class="nf">print_global</span>
      <span class="nb">puts</span> <span class="s2">"全局变量在 Class1 中输出为 #</span><span class="se">\$</span><span class="s2">global_variable"</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="k">class</span> <span class="nc">Class2</span>
  <span class="k">def</span> <span class="nf">print_global</span>
      <span class="nb">puts</span> <span class="s2">"全局变量在 Class2 中输出为 #</span><span class="se">\$</span><span class="s2">global_variable"</span>
  <span class="k">end</span>
<span class="k">end</span>
 
<span class="n">class1obj</span> <span class="o">=</span> <span class="no">Class1</span><span class="p">.</span><span class="nf">new</span>
<span class="n">class1obj</span><span class="p">.</span><span class="nf">print_global</span>
<span class="n">class2obj</span> <span class="o">=</span> <span class="no">Class2</span><span class="p">.</span><span class="nf">new</span>
<span class="n">class2obj</span><span class="p">.</span><span class="nf">print_global</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">class</span> <span class="nc">Customer</span>
   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
      <span class="vi">@cust_id</span><span class="o">=</span><span class="nb">id</span>
      <span class="vi">@cust_name</span><span class="o">=</span><span class="nb">name</span>
      <span class="vi">@cust_addr</span><span class="o">=</span><span class="n">addr</span>
   <span class="k">end</span>
   <span class="k">def</span> <span class="nf">display_details</span><span class="p">()</span>
      <span class="nb">puts</span> <span class="s2">"Customer id </span><span class="si">#@cust_id</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer name </span><span class="si">#@cust_name</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer address </span><span class="si">#@cust_addr</span><span class="s2">"</span>
    <span class="k">end</span>
<span class="k">end</span>
 
<span class="c1"># 创建对象</span>
<span class="n">cust1</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span> <span class="s2">"John"</span><span class="p">,</span> <span class="s2">"Wisdom Apartments, Ludhiya"</span><span class="p">)</span>
<span class="n">cust2</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"2"</span><span class="p">,</span> <span class="s2">"Poul"</span><span class="p">,</span> <span class="s2">"New Empire road, Khandala"</span><span class="p">)</span>
 
<span class="c1"># 调用方法</span>
<span class="n">cust1</span><span class="p">.</span><span class="nf">display_details</span><span class="p">()</span>
<span class="n">cust2</span><span class="p">.</span><span class="nf">display_details</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">class</span> <span class="nc">Customer</span>
   <span class="vc">@@no_of_customers</span><span class="o">=</span><span class="mi">0</span>
   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="n">addr</span><span class="p">)</span>
      <span class="vi">@cust_id</span><span class="o">=</span><span class="nb">id</span>
      <span class="vi">@cust_name</span><span class="o">=</span><span class="nb">name</span>
      <span class="vi">@cust_addr</span><span class="o">=</span><span class="n">addr</span>
   <span class="k">end</span>
   <span class="k">def</span> <span class="nf">display_details</span><span class="p">()</span>
      <span class="nb">puts</span> <span class="s2">"Customer id </span><span class="si">#@cust_id</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer name </span><span class="si">#@cust_name</span><span class="s2">"</span>
      <span class="nb">puts</span> <span class="s2">"Customer address </span><span class="si">#@cust_addr</span><span class="s2">"</span>
    <span class="k">end</span>
    <span class="k">def</span> <span class="nf">total_no_of_customers</span><span class="p">()</span>
       <span class="vc">@@no_of_customers</span> <span class="o">+=</span> <span class="mi">1</span>
       <span class="nb">puts</span> <span class="s2">"Total number of customers: </span><span class="si">#@@no_of_customers</span><span class="s2">"</span>
    <span class="k">end</span>
<span class="k">end</span>
 
<span class="c1"># 创建对象</span>
<span class="n">cust1</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span> <span class="s2">"John"</span><span class="p">,</span> <span class="s2">"Wisdom Apartments, Ludhiya"</span><span class="p">)</span>
<span class="n">cust2</span><span class="o">=</span><span class="no">Customer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"2"</span><span class="p">,</span> <span class="s2">"Poul"</span><span class="p">,</span> <span class="s2">"New Empire road, Khandala"</span><span class="p">)</span>
 
<span class="c1"># 调用方法</span>
<span class="n">cust1</span><span class="p">.</span><span class="nf">total_no_of_customers</span><span class="p">()</span>
<span class="n">cust2</span><span class="p">.</span><span class="nf">total_no_of_customers</span><span class="p">()</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">class</span> <span class="nc">Example</span>
   <span class="no">VAR1</span> <span class="o">=</span> <span class="mi">100</span>
   <span class="no">VAR2</span> <span class="o">=</span> <span class="mi">200</span>
   <span class="k">def</span> <span class="nf">show</span>
       <span class="nb">puts</span> <span class="s2">"第一个常量的值为 </span><span class="si">#{</span><span class="no">VAR1</span><span class="si">}</span><span class="s2">"</span>
       <span class="nb">puts</span> <span class="s2">"第二个常量的值为 </span><span class="si">#{</span><span class="no">VAR2</span><span class="si">}</span><span class="s2">"</span>
   <span class="k">end</span>
<span class="k">end</span>
 
<span class="c1"># 创建对象</span>
<span class="n">object</span><span class="o">=</span><span class="no">Example</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">object</span><span class="p">.</span><span class="nf">show</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<p><strong>Ruby 伪变量</strong></p>

<p>它们是特殊的变量，有着局部变量的外观，但行为却像常量。您不能给这些变量赋任何值。</p>

<ul>
  <li><strong>self:</strong> 当前方法的接收器对象。</li>
  <li><strong>true:</strong> 代表 true 的值。</li>
  <li><strong>false:</strong> 代表 false 的值。</li>
  <li><strong>nil:</strong> 代表 undefined 的值。</li>
  <li><strong>__FILE__:</strong> 当前源文件的名称。</li>
  <li><strong>__LINE__:</strong> 当前行在源文件中的编号。</li>
</ul>

<h3 id="双冒号运算符-">双冒号运算符 “::”</h3>

<p>两个冒号 <strong>::</strong> 来引用类或模块中的常量</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MR_COUNT = 0        # 定义在主 Object 类上的常量
module Foo
  MR_COUNT = 0
  ::MR_COUNT = 1    # 设置全局计数为 1
  MR_COUNT = 2      # 设置局部计数为 2
end
puts MR_COUNT       # 这是全局常量
puts Foo::MR_COUNT  # 这是 "Foo" 的局部常量

CONST = ' out there'
class Inside_one
   CONST = proc {' in there'}
   def where_is_my_CONST
      ::CONST + ' inside one'
   end
end
class Inside_two
   CONST = ' inside two'
   def where_is_my_CONST
      CONST
   end
end
puts Inside_one.new.where_is_my_CONST
puts Inside_two.new.where_is_my_CONST
puts Object::CONST + Inside_two::CONST
puts Inside_two::CONST + CONST
puts Inside_one::CONST
puts Inside_one::CONST.call + Inside_two::CONST
</code></pre></div></div>

<h3 id="多行注释">多行注释</h3>

<p>使用 <strong>=begin</strong> 和 <strong>=end</strong> 语法注释多行，如下所示：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=comment.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts "Hello, Ruby!"
 
=begin
这是一个多行注释。
可扩展至任意数量的行。
但 =begin 和 =end 只能出现在第一行和最后一行。 
=end

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="循环">循环</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=loop.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------------------'
i = 0
num = 5
 
while i &lt; num  do
   puts("在循环语句中 i = #{i}" )
   i +=1
end

puts '----------------------------------------------'
\$i = 0
\$num = 5
begin
   puts("在循环语句中 i = #\$i" )
   \$i +=1
end while \$i &lt; \$num

puts '----------------------------------------------'
\$i = 0
\$num = 5
 
until \$i &gt; \$num  do
   puts("在循环语句中 i = #\$i" )
   \$i +=1;
end

puts '----------------------------------------------'
\$i = 0
\$num = 5
begin
   puts("在循环语句中 i = #\$i" )
   \$i +=1;
end until \$i &gt; \$num

puts '----------------------------------------------'
for i in 0..5
   puts "局部变量的值为 #{i}"
end

puts '----------------------------------------------'
(0..5).each do |i|
   puts "局部变量的值为 #{i}"
end

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="块block">块（block）</h3>

<ul>
  <li>块由大量的代码组成。</li>
  <li>您需要给块取个名称。</li>
  <li>块中的代码总是包含在大括号 {} 内。</li>
  <li>块总是从与其具有相同名称的函数调用。这意味着如果您的块名称为 <em>test</em>，那么您要使用函数 <em>test</em> 来调用这个块。</li>
  <li>您可以使用 <em>yield</em> 语句来调用块。</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=block.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

def test
   puts "在 test 方法内"
   yield
   puts "你又回到了 test 方法内"
   yield
end
test {puts "你在块内"}

puts '----------------------------------------------'
def test
   yield 5, 'five'
   puts "在 test 方法内"
   yield 100, 'one hundred'
end
test {|a, b| puts "你在块 #{a} 内 #{b}"}

puts '----------------------------------------------'
def test
  yield
end
test{ puts "Hello world"}

puts '----------------------------------------------'
def test(&amp;block)
   block.call
end
test { puts "Hello World!"}

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="模块module">模块（Module）</h3>

<p>模块（Module）是一种把方法、类和常量组合在一起的方式。模块（Module）为您提供了两大好处。</p>

<ul>
  <li>模块提供了一个<em>命名空间</em>和避免名字冲突。</li>
  <li>模块实现了 <em>mixin</em> 装置。</li>
</ul>

<p>模块（Module）定义了一个命名空间，相当于一个沙盒，在里边您的方法和常量不会与其他地方的方法常量冲突。</p>

<p>模块类似与类，但有一下不同：</p>

<ul>
  <li>模块不能实例化</li>
  <li>模块没有子类</li>
  <li>模块只能被另一个模块定义</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="n">support</span><span class="p">.</span><span class="nf">rb</span>
<span class="k">module</span> <span class="nn">Week</span>
   <span class="no">FIRST_DAY</span> <span class="o">=</span> <span class="s2">"Sunday"</span>
   <span class="k">def</span> <span class="nc">Week</span><span class="o">.</span><span class="nf">weeks_in_month</span>
      <span class="nb">puts</span> <span class="s2">"You have four weeks in a month"</span>
   <span class="k">end</span>
   <span class="k">def</span> <span class="nc">Week</span><span class="o">.</span><span class="nf">weeks_in_year</span>
      <span class="nb">puts</span> <span class="s2">"You have 52 weeks in a year"</span>
   <span class="k">end</span>
<span class="k">end</span>

<span class="no">EOF</span>

<span class="n">program</span><span class="o">=</span><span class="n">module</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="p">\</span><span class="vg">$LOAD_PATH</span> <span class="o">&lt;&lt;</span> <span class="s1">'.'</span>
<span class="nb">require</span> <span class="s2">"support"</span>
 
<span class="k">class</span> <span class="nc">Decade</span>
<span class="kp">include</span> <span class="no">Week</span>
   <span class="n">no_of_yrs</span><span class="o">=</span><span class="mi">10</span>
   <span class="k">def</span> <span class="nf">no_of_months</span>
      <span class="nb">puts</span> <span class="no">Week</span><span class="o">::</span><span class="no">FIRST_DAY</span>
      <span class="n">number</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="mi">12</span>
      <span class="nb">puts</span> <span class="n">number</span>
   <span class="k">end</span>
<span class="k">end</span>
<span class="n">d1</span><span class="o">=</span><span class="no">Decade</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">puts</span> <span class="no">Week</span><span class="o">::</span><span class="no">FIRST_DAY</span>
<span class="no">Week</span><span class="p">.</span><span class="nf">weeks_in_month</span>
<span class="no">Week</span><span class="p">.</span><span class="nf">weeks_in_year</span>
<span class="n">d1</span><span class="p">.</span><span class="nf">no_of_months</span>

<span class="no">EOF</span>


<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<h3 id="mixins">Mixins</h3>

<p>Ruby 不直接支持多重继承，但是 Ruby 的模块（Module）有另一个神奇的功能。它几乎消除了多重继承的需要，提供了一种名为 <em>mixin</em> 的装置。</p>

<p>Ruby 没有真正实现多重继承机制，而是采用成为mixin技术作为替代品。将模块include到类定义中，模块中的方法就mix进了类中。</p>

<p>下面代码中：</p>

<ul>
  <li>模块 A 由方法 a1 和 a2 组成。</li>
  <li>模块 B 由方法 b1 和 b2 组成。</li>
  <li>类 Sample 包含了模块 A 和 B。</li>
  <li>类 Sample 可以访问所有四个方法，即 a1、a2、b1 和 b2。</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=mixin.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

module A
   def a1
     puts "a1"
   end
   def a2
     puts "a2"   
   end
end
module B
   def b1
     puts "b1"   
   end
   def b2
     puts "b2"   
   end
end
 
class Sample
include A
include B
   def s1
     puts "s1"
   end
end
 
samp=Sample.new
samp.a1
samp.a2
samp.b1
samp.b2
samp.s1

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="时间">时间</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=time.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

time1 = Time.new
 
puts "当前时间 : " + time1.inspect
 
# Time.now 功能相同
time2 = Time.now
puts "当前时间 : " + time2.inspect

puts '----------------------------------------------'
time = Time.new
 
# Time 的组件
puts "当前时间 : " + time.inspect
puts time.year    # =&gt; 日期的年份
puts time.month   # =&gt; 日期的月份（1 到 12）
puts time.day     # =&gt; 一个月中的第几天（1 到 31）
puts time.wday    # =&gt; 一周中的星期几（0 是星期日）
puts time.yday    # =&gt; 365：一年中的第几天
puts time.hour    # =&gt; 23：24 小时制
puts time.min     # =&gt; 59
puts time.sec     # =&gt; 59
puts time.usec    # =&gt; 999999：微秒
puts time.zone    # =&gt; "UTC"：时区名称

puts '----------------------------------------------'
# July 8, 2008
Time.local(2008, 7, 8)  
# July 8, 2008, 09:10am，本地时间
Time.local(2008, 7, 8, 9, 10)   
# July 8, 2008, 09:10 UTC
Time.utc(2008, 7, 8, 9, 10)  
# July 8, 2008, 09:10:11 GMT （与 UTC 相同）
Time.gm(2008, 7, 8, 9, 10, 11)

puts '----------------------------------------------'
time = Time.new
 
puts time.to_s
puts time.ctime
puts time.localtime
puts time.strftime("%Y-%m-%d %H:%M:%S")

puts '----------------------------------------------'
now = Time.now           # 当前时间
puts now
 
past = now - 10          # 10 秒之前。Time - number =&gt; Time
puts past
 
future = now + 10        # 从现在开始 10 秒之后。Time + number =&gt; Time
puts future
 
diff = future - now      # =&gt; 10  Time - Time =&gt; 秒数
puts diff

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="范围range">范围（Range）</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=range.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

range1 = (1..10).to_a
range2 = ('bar'..'bat').to_a
puts "#{range1}"
puts "#{range2}"

puts '----------------------------------------------'
digits = 0..9
 
puts digits.include?(5)
ret = digits.min
puts "最小值为 #{ret}"
 
ret = digits.max
puts "最大值为 #{ret}"
 
ret = digits.reject {|i| i &lt; 5 }
puts "不符合条件的有 #{ret}"
 
digits.each do |digit|
   puts "在循环中 #{digit}"
end

puts '----------------------------------------------'
score = 70
 
result = case score
when 0..40
    "糟糕的分数"
when 41..60
    "快要及格"
when 61..70
    "及格分数"
when 71..100
       "良好分数"
else
    "错误的分数"
end

puts result

puts '----------------------------------------------'
if ((1..10) === 5)
  puts "5 在 (1..10)"
end
 
if (('a'..'j') === 'c')
  puts "c 在 ('a'..'j')"
end
 
if (('a'..'j') === 'z')
  puts "z 在 ('a'..'j')"
end

EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="迭代器iterator">迭代器（iterator）</h3>

<p>迭代器（iterator）是<em>集合</em>支持的方法。存储一组数据成员的对象称为集合。在这里我们将讨论两种迭代器，<em>each</em> 和 <em>collect</em>。</p>

<ul>
  <li>each： 迭代器返回数组或哈希的所有元素。</li>
  <li>collect： 返回整个集合，不管它是数组或者是哈希。感觉类似map-reduce中的map。</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">iterator</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">ary</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">ary</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
   <span class="nb">puts</span> <span class="n">i</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">collect</span><span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="n">x</span> <span class="p">}</span>
<span class="nb">puts</span> <span class="n">b</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="nf">collect</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="mi">10</span><span class="o">*</span><span class="n">x</span><span class="p">}</span>
<span class="nb">puts</span> <span class="n">b</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<h3 id="输入输出">输入输出</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=input_output.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------------------'
val1 = "This is variable one"
val2 = "This is variable two"
puts val1
puts val2

puts '----------------------------------------------'
puts "Enter a value :"
val = gets
puts val

puts '----------------------------------------------'
# 与 puts 语句不同，puts 语句输出整个字符串到屏幕上，而 putc 语句可用于依次输出一个字符。
str="Hello Ruby!"
putc str

puts '----------------------------------------------'
# print 语句与 puts 语句类似。唯一的不同在于 puts 语句在输出内容后会跳到下一行，而使用 print 语句时，光标定位在同一行。
print "Hello World"
print "Good Morning"


EOF

chmod 755 $program
./$program
</code></pre></div></div>

<p><strong><a href="https://www.cnblogs.com/yjmyzz/archive/2010/02/22/1671130.html">puts,p,print的区别</a></strong></p>

<p>puts 输出内容后，会自动换行(如果内容参数为空，则仅输出一个换行符号)；另外如果内容参数中有转义符，输出时将先处理转义再输出
p 基本与puts相同，但不会处理参数中的转义符号
print 基本与puts相同，但输出内容后，不会自动在结尾加上换行符</p>

<p>另外，在输出双字节的字符，比如全角英文或汉字时，p会输出对应的二个字节对应的数字，而非字符</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s = "aaaa\nbb\tbb"
p s
p "****************"
puts s
p "****************"
print s

s = "中"
 
p s
puts s
print s
</code></pre></div></div>

<h3 id="文件操作">文件操作</h3>

<ul>
  <li><em>File.new</em> 方法创建一个 <em>File</em> 对象用于读取、写入或者读写，读写权限取决于 mode 参数。最后，您可以使用 <em>File.close</em> 方法来关闭该文件。</li>
  <li><em>File.open</em> 方法创建一个新的 file 对象，并把该 file 对象赋值给文件。但是，<em>File.open</em> 和 <em>File.new</em> 方法之间有一点不同。不同点是 <em>File.open</em> 方法可与块关联，而 <em>File.new</em> 方法不能。</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=file.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

puts '----------------------------------------------'
aFile = File.new("input.txt", "w+")
if aFile
   aFile.syswrite("ABCDEFGHIJKLKMNOPQ\nRSTUVW\nXYZ\n")
   aFile.rewind
   # 方法 each_byte 是个可以迭代字符串中每个字符
   aFile.each_byte {|ch| putc ch; putc ?. }   
else
   puts "Unable to open file!"
end
puts

puts '----------------------------------------------'
aFile = File.new("input.txt", "r")
if aFile
   content = aFile.sysread(10)
   puts content
else
   puts "Unable to open file!"
end

puts '----------------------------------------------'
arr = IO.readlines("input.txt")
puts arr[0]
puts arr[1]

puts '----------------------------------------------'
IO.foreach("input.txt"){|block| puts block}


EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h3 id="异常">异常</h3>

<ul>
  <li>使用 <em>rescue</em> 块捕获异常，然后使用 <em>retry</em> 语句从开头开始执行 <em>begin</em> 块。</li>
  <li>使用 <em>raise</em> 语句抛出异常</li>
  <li>使用 ensure语句，无论是否抛出异常，保证一些处理在代码块结束时完成</li>
  <li>使用 <em>else</em> 子句，表示如果没有异常则执行，它一般是放置在 <em>rescue</em> 子句之后，任意 <em>ensure</em> 之前。</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">program</span><span class="o">=</span><span class="n">exception</span><span class="p">.</span><span class="nf">rb</span>
<span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="vg">$program</span>
<span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>
   <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"/unexistant_file"</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">file</span>
      <span class="nb">puts</span> <span class="s2">"File opened successfully"</span>
   <span class="k">end</span>
<span class="k">rescue</span>
      <span class="n">file</span> <span class="o">=</span> <span class="no">STDIN</span>
<span class="k">end</span>
<span class="nb">print</span> <span class="n">file</span><span class="p">,</span> <span class="s2">"=="</span><span class="p">,</span> <span class="no">STDIN</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>


<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="n">fname</span> <span class="o">=</span> <span class="s2">"/unexistant_file"</span>
<span class="k">begin</span>
   <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">file</span>
      <span class="nb">puts</span> <span class="s2">"File opened successfully"</span>
   <span class="k">end</span>
<span class="k">rescue</span>
   <span class="n">fname</span> <span class="o">=</span> <span class="s2">"input.txt"</span>
   <span class="nb">puts</span> <span class="s1">'change file name'</span>
   <span class="k">retry</span>
<span class="k">end</span>


<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>  
    <span class="nb">puts</span> <span class="s1">'I am before the raise.'</span>  
    <span class="k">raise</span> <span class="s1">'An error has occurred.'</span>  
    <span class="nb">puts</span> <span class="s1">'I am after the raise.'</span>  
<span class="k">rescue</span>  
    <span class="nb">puts</span> <span class="s1">'I am rescued.'</span>  
<span class="k">end</span>  
<span class="nb">puts</span> <span class="s1">'I am after the begin block.'</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>  
  <span class="k">raise</span> <span class="s1">'A test exception.'</span>  
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>  
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">message</span>  
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">inspect</span>  
<span class="k">end</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>
  <span class="k">raise</span> <span class="s1">'A test exception.'</span>
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">message</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">inspect</span>
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s2">"Ensuring execution"</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s1">'----------------------------------------------'</span>
<span class="k">begin</span>
 <span class="c1"># 抛出 'A test exception.'</span>
 <span class="nb">puts</span> <span class="s2">"I'm not raising exception"</span>
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">message</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">backtrace</span><span class="p">.</span><span class="nf">inspect</span>
<span class="k">else</span>
   <span class="nb">puts</span> <span class="s2">"Congratulations-- no errors!"</span>
<span class="k">ensure</span>
  <span class="nb">puts</span> <span class="s2">"Ensuring execution"</span>
<span class="k">end</span>

<span class="no">EOF</span>

<span class="n">chmod</span> <span class="mi">755</span> <span class="vg">$program</span>
<span class="p">.</span><span class="nf">/</span><span class="vg">$program</span>
</code></pre></div></div>

<p><strong>Catch 和 Throw</strong></p>

<p>raise 和 rescue 的异常机制能在发生错误时放弃执行，有时候需要在正常处理时跳出一些深层嵌套的结构。此时 catch 和 throw 就派上用场了。</p>

<p><em>catch</em> 定义了一个使用给定的名称（可以是 Symbol 或 String）作为标签的块。块会正常执行直到遇到一个 throw。</p>

<p>下面例子中，用户键入 ‘!’ 回应任何提示，使用一个 throw 终止与用户的交互。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>program=try.rb
cat &lt;&lt; EOF &gt; $program
#!/usr/bin/env ruby

def promptAndGet(prompt)
   print prompt
   res = readline.chomp
   throw :quitRequested if res == "!"
   return res
end
 
catch :quitRequested do
   name = promptAndGet("Name: ")
   age = promptAndGet("Age: ")
   sex = promptAndGet("Sex: ")
   # ..
   # 处理信息
end



EOF

chmod 755 $program
./$program
</code></pre></div></div>

<h2 id="参考">参考</h2>

<ul>
  <li><a href="https://www.ruby-lang.org/zh_cn/documentation/quickstart/">20 minutes quickstart</a></li>
  <li><a href="https://www.runoob.com/ruby/ruby-tutorial.html">Ruby 教程</a></li>
</ul>

</div></div>

<!-- End of main content -->

				</main>
			</div>
			<div class="tertiary-separator"></div>
			<div class="tertiary-column">
				<div class="tertiary-column-content">
			
<!-- include tertiary-column.html -->
<div class="tertiary-widget-separator"></div>
<div class="widget">

<!-- include browser-info.html -->
<div class="browser-info">
	<h1>Browser information:</h1>
	<p>This website uses CSS3 & HTML5. It is recommended to use a modern browser with at least the following version number:</p>
	<ul>
		<li>Chrome 29.0</li>
		<li>Edge 12.0</li>
		<li>Explorer 11.0</li>
		<li>Firefox 28.0</li>
		<li>Safari 9.0</li>
		<li>Opera 17.0</li>
	</ul>
	<p>Problems? please <a href="/pages/contact/contact.html">contact</a> me.</p>
</div>
<!-- end of include browser-info.html -->

</div>
<!-- end of include tertiary-column.html -->

				</div>
			</div>

		</div>
		<div class="footer-separator"></div>
		<div class="footer-panel">
	
<!-- include footer.html -->
<footer>
	<div>
		<p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
	</div>
</footer>
<!-- end of include footer.html -->

		</div>
  	</body>
</html>
